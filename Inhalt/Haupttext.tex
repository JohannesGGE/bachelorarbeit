\chapter{AT: Einführendes Kapitel}
\label{sec:Intro}

\begin{itemize}
	\item Relevanz/Abgrenzung/Ziele
\end{itemize}


\begin{itemize}
	\item Zum Thema hinführen (Beispiele), These/Gegenthese, bedeutende Aussage durch namenhafte Persöhnlichkeit, überraschende Feststellung machen, (aktualität?) \hl{Warum ist das Thema interesant, wichtig und spannend (wissebschaftlich als auch für jeden der die arbeit liest)}
	\begin{itemize}
		\item Email immernoch ein viel genutzes Kommunikationsmittel (Zahlen)
		\item Sehr viele Emails werden empfangen (Zahlen)
		\item Nutezende müssen das bearbeiten der Mails möglichst effizient machen um andere Dinge zu schaffen
		\item Es gibt viele Email Clients, die versprechen die Email Kommunikation, schnellfer, effizienter und zukunftsorienteirter zu machen
		\item Emails Snoozen in vielen Clients ein Teil davon
		\item Obwohl viele die großen Anbieter nutzen (Zahlen), ist es gerade für diejenigen, die sich der Macht der großen entziehen wollen und z.b. auf Open Source wert legen notwendig offenen Stanndard für Email Management zu haben
		\item Den gibts auch, IMAP 
	\end{itemize}
	\item Gegenstad/Problemstelung/Ziele, Begründung Wahl der Forschungsfrage indem Forschungslücke erläutert wird \hl{Was ist der Gegenstand meiner Arbeit? Warum habe ich mich für diese Problemstelung entschieden und warum wichtig zu beantworten? Was ist das Ziel der Arbeit?}
	\begin{itemize}
		\item Ich bin selber fan von offenen Standards und der unabhänigkeit von großen Unternehemen wie Google oder Microsoft
		\item deslab ist es wichtig zu schauen, inwieweit neue Features berits durch den existierenden ofenen standard umgsetzt werden können ud falls nicht, dass möglichkeiten für erweitungen erarbeitet wrrden
		\item Das Problem, dass IMAP nur Grundfunktionalitäten zur Verfüugn stellt. Neue Features wie Snooze werden nicht unterstützt.
		\item Deshalb viele verschiedene Implementierungen dieses Features in den Cleints.
		\item untereinander nicht nutzbar (außer leiches Unternehmen, sync über Account)
		\item vereinheitlichung wäre hier Wünschenswert
		\item In der Arbeit soll analysiert werden, wie die einzelnen Clients das Feature implementieren
		\item geschaut werden, inwieweit die Implementieurngen bereits interoperabel sind
		\item dann schauen, welche Möglichkeiten IMAP beitet um dieses Feature interoperabel umsetzen zu können
		\item Oder welche Erweiterungen geschaffen werden müssten
	\end{itemize}
	\item Gang der Untersuchung, Methodik skizzieren, Wie umfassend wurde die Literatur analysiert \hl{Wie lässt sich die Methodik beschreiben, mit der ich meine zentrale Forschungsfrage analysiert bzw. beantowrtet habe?}
	\begin{itemize}
		\item Dazu wird zuerst analysiert, welche clients das feature wie implementiert haben
		\item dann geschaut welche mögichekiten IMAP bietet das Feature zu implementieruen. bzw welche lösungen missbraucht/adaptiert werden könnten
		\item was nötig wäre als erweitung um das ganze zu standardtisieren
		\item das ganze basiert größtenteils auf aussagen der Client entwickler/Firmen oder testen und analysieren der clients
		\item zur standard analyse werden die rfcs zu IMAP benutzt, aber auch disussionen in (foren/Github)
		\item anhand der Nextcloud Mail App wird geschaut wie die analysierte interoperabilität implementiert werden könnte
	\end{itemize}
	\item Abgrenzung der Arbeit, Schwerpukt setzen, Bei bereits vorhandenen Arbeiten darauf hinweisen \hl{Muss ich meine Arbeit eingrenzen? Wie kann ich die Akzentuierung blausiebel begründen?}
	\begin{itemize}
		\item Schwerpunkt ist Möglichkeiten aufzeigen, wie das Snooze Feature über IMAP interoperabel implementiert werden könnte. Dabei sollen vorhandene Standards oder verbreitete Implementierungen vorzugsweise genutzt werden
		\item ...
	\end{itemize}
	\item Aufgabu der Arbeit, wie bin ich generell vorgegangen, um die Forscungsfrage zu beantworten, Damit ist im wesentlichen die Argumentationsline gemeint, die sich aus Ihrer Gliederung ergibt \hl{Wie habe ich meine ArbeitAufgebaut, wie werde ich vorgenen?}
	\begin{itemize}
		\item zuerst die grundlagen (Inbox Zero, IMAP, Email, interoperabel usw.) erklären um das nachfolgende verstehen zu können
		\item dann erklären, warum es einen interoperablen Ansatzt braucht und welche Möglichkeiten braucht man um Inbox Zero umzusetzen, wie sieht snoozen soll Snooze in Email clients aussehen?
		\item dann werden email cients analysiet und genasucht, wie die implementierung aussieht
		\item folgenden werden Lösungsanätze beschrieben, die die snooze interoperabel möglich machen könnten
		\item das ganze wird dann an der Nextcloud Mail app beschrieben
		\item der letzte schritt wäre die beschriebung einer Standardeerweiterung, was müsste diese enthalten
	\end{itemize}
\end{itemize}



\chapter{AT: What is it, How it works}
\label{sec:HowItWorks}

\section{AT: Effizientes Mail Management}
\label{sec:InboxZero}

Viele stehen vor dem Problem, dass ihr E-Mail Posteingang \hl{(im folgenden INBOX genannt)} überfüllt ist mit E-Mails, welche noch beantwortet werden müssen. Das E-Mail Postfach öffnen führt zu Stress, und es werden immer mehr E-Mails obwohl man sein bestes gibt diese zu bearbeiten. Es scheint so, als ob die Fähigkeit mit der Masse an E-Mails klar zu kommen, entscheided ist über den Erfolg, den man vorallem im Job hat. Die Inbox wird als To-Do Liste, Kalender und Postfach in einem genutzt. \cite{googletechtalksInboxZero2007} Dieses Konzept führt gezwungener Maßen zu Problemen. Es gibt aber Konzepte, mit denen dieses Problem angegangen werden kann. Die meisten basieren auf Getting Things Done, was eine Produktivitätsstrategie ist, die das Ziel hat Aufgaben, Informationen, Probleme oder Projekte extern, also nicht im Kopf, zu verwalten. \cite{GettingThingsDone2023} David Allen hat diese Methode entwickelt und beschreibt in seinem Buch "Getting Things Done: The Art of Stress-Free Productivity", wie Sie funktioniert und anzuwenden ist. \hl{Buch ref?}
Auf der allgemeinen Getting Things Done Methode basieren andere Strategien, welche sich auf das E-Mail Management spezialisieren. Inbox Zero ist eine davon, welche von Merlin Mann erstmalig definiert wurde und nicht das Ziel hat keine E-Mails mehr in der Inbox zu haben, wie man es durch den Namen annehmen könnte, sondern eher darauf bezogen ist, kein Stress bei der Bearbeitung der Inbox zu haben. \cite{WhatInboxZero2019} Es geht nicht darum alle E-Mails in der Inbox zu beantworten sondern alle E-Mails zu bearbeiten. Das heißt, dass man sich Aktionen definiert, welche man auf die zu bearbeitende E-Mail anwendet. Das kann das Beantworten der E-Mail sein aber genauso das Löschen oder Zurückstellen der E-Mail. Wichtig ist, dass man ohne viel überlegen entscheidet, welche Aktion auszuführen ist und sich nach ausführen der nächsten E-Mail widmet. \cite{googletechtalksInboxZero2007}
\hl{Ähnlich ist die N days later Methode. (Nicht relevant?)}

\begin{itemize}
	\item Stress bei Inbox öffnen, da viel zu viele Mails
	\item Verschiedene Methoden das zu ändern, welche alle ähnlich sind und das gleiche Ziel verfolgen
	\begin{itemize}
		\item Getting Things Done
		\item Inbox Zero (productivity philosophy about dealing with a constant, life-long stream of email erstmalig von Merlin Mann erdacht) \cite{WhatInboxZero2019}
		\begin{itemize}
			\item Inbox ist nur ein Übergang, aber nicht das Ende bzw. der Endpunkt für eine E-Mail \cite{googletechtalksInboxZero2007}
		\end{itemize}
		\item To-Do Inbox
		\item (N-days later)
	\end{itemize}
\end{itemize}

\section{AT: E-Mail and IMAP}
\label{sec:EmailAndIMAP}

\begin{itemize}
	\item Wie wird Snooze definiert?
	\item Was ist IMAP und wie funktionierts
	\item Was genau heißt interoperabel
	\item Was ist der Mailserver???
	\item INBOX/Posteingang Begriff erklären Sysnonym
	\item Ordner/Mailbox Begriff erklären Sysnonym
	\item Client erklären?
	\item Tag/Flag/Label/Permaflag definieren und unterscheiden in Bezug auf IMAP oder unten bei thunderbird (zumindest permaflags)
	\item Auf Thread Möglichkeit eingehen, oder unten bei Mailspring
	\item RFCs hier erklären? Was ist das und wie funktionierts
\end{itemize}


\chapter{AT: Problemstellung in Mail}
\label{sec:Problemstellung}

\begin{itemize}
	\item Wie kann kann Inbox Zero/GTD in Mail Clients aussehen, bzw. welche Möglichkeiten braucht man um diese Konzepte umsetzen zu können?
	\item Warum ist es nötig/sinnvoll das über IMAP zu implementieren?
	\begin{itemize}
		\item Interoperabel
	\end{itemize}
\end{itemize}


\chapter{AT: Exsitierende Implementierungen}
\label{sec:ExistierendeImpl}

In diesem Kapitel werden verschiedenste Email Clients betrachtet und beschrieben ob und in welcher Form sie eine Snooze Funktionalität implementieren. Die Auswahl der betrachteten Clients basiert auf drei Schwerpunkten:\\
1. Popularität\\
Um den Status Quo analysieren zu können ist es wichtig verschiedene Clients zu betrachten. Allerdings gibt es nur eine Hand voll Email Clients, welche den Großteil des Marktes bei der Nutzung ausmachen. Auch wenn die Zahlen nicht ganz eindeutig sind, ist klar, dass die meisten Menschen die Clients von Gmail, Apple Mail und Outlook nutzen. Weitere Clients mit weniger Nutzenden, aber immernoch relevanten Zahlen sind Yahoo Mail, Web.de, GMX, Thunderbird und Samsung Mail. \cite{MostPopularEmail2022}  \cite{EmailClientMarketa} \cite{EMailNutzung2021Mailjet} \\
2. Open Source\\
Der zweite Schwerpunkt sind Open Source Clients. \\
3. Snooze Funktionalität\\
Der letzte Schwerpunkt sind Email Clients, welche die Snooze Funktionalität implementieren. Es gibt viele verschiedene Implementierungen für die Snooze Funktionalität. Um bewerten zu können, welche Lösungen gut und welche eher unbrauchbar sind, ist es gut einen Gesamtüberlick zu bekommen. Dabei können gerade Email Clients mit wenig Nutzenden eine sehr kluge Implementierung haben.

Die verschiedenen Clients werden in vier Gruppen unterteilt.\\
\textbf{Keine Implementierung:} Clients, welche keine Snooze Funktionalität haben.\\
\textbf{Lokale Implementierung:} Clients, welche eine Snooze Funktionalität haben, welche aber nicht für andere Clients benutzbar ist.\\
\textbf{\hl{Environment Implementierung}:} Client, welche die Snooze Funktionalität besitzen und diese Clientübergreifend zumindest in der eigenen Umgebung funktionieren.\\
\textbf{Interoperable Implementierungen:} Clients, welche die Snooze Funktionalität so implementiert haben, dass sie theoretisch von anderen Clients benutzt werden kann.


\begin{itemize}
	\item Kein IMAP
	\item Welche Annahmen wurden über propräritäre Software getroffen??
	\item wie wurde die snooze funktion getestet? Wurde traffic angeschaut? welcher mailserver (dovecot) wurde benutzt, welche extentions sind dort aktiviert? Wurde der metadaten ext gar nicht ausprobiert?!?
	\item Add Yahoo, Samsung und Windows Live Mail
\end{itemize}

\section{AT: Keine Implementierung}
\label{sec:NoImpl}

Bei der Analyse von bestehenden Implementierungen einer Snooze Funktionalität haben sich einige Email Clients herausgestellt, welche diese Funktionalität gar nicht implementiert haben. Darunter fallen der Android E-Mail Client K-9 \footnote{K-9: \url{https://k9mail.app/}}, OpenExchangeMail \footnote{Open-Xchange Email: \url{https://www.open-xchange.com/products/ox-cloud}}, Yahoo Mail \footnote{Yahoo Mail: \url{https://overview.mail.yahoo.com/}}, SnappyMail \footnote{SnappyMail: \url{https://snappymail.eu/}}, Rainloop \footnote{Rainloop: \url{https://www.rainloop.net/}}, Tutanota \footnote{Tutanota: \url{https://tutanota.com/}}, Posteo \footnote{Posteo: \url{https://posteo.de/de}}, ProtonMail \footnote{ProtonMail: \url{https://proton.me/mail}}, Cypht \footnote{Cypht: \url{https://cypht.org/}} oder Evolution \footnote{Evolution: \url{https://wiki.gnome.org/Apps/Evolution}}.


\section{AT: Lokale Implementierung}
\label{sec:LocalImpl}

Es gibt aber auch Email Clients, welche die Snooze Funktionalität implementiert haben aber diese nur in dem jeweiligen Client nutzbar ist. Die folgenden Clients fallen darunter:

\subsection{Mailbird}

Mailbird \footnote{Mailbird: \url{https://www.getmailbird.com/de/}} ist ein Desktop Email Client für Windows und Mac. Die Snooze Funktion ist nur in der Inbox verfügbar und verschiebt die Email in in den Reiter \enquote{Zurückgestellt} bzw. \enquote{Snoozed}. Über IMAP wird die Email in eine Mailbox \enquote{Snoozed} verschoben. 'Wenn die Zeit abläuft, wird die E-Mail wieder ganz oben in Ihrem Posteingang angezeigt.' \cite{NtzenSnoozeFnktionIhrem2022} Über IMAP ist dies nicht der Fall. Zusätzlich wird die Email noch als ungelesen markiert.

\subsection{FairEmail} 
FairEmail\footnote{FairEmail: \url{https://email.faircode.eu/}} ist ein E-Mail Client für Android. Beim snoozen einer Mail wird diese für den Nutzenden ausgeblendet. Für andere Email Clients ist dieses Ausblenden nicht sichtbar, da es lokal auf dem Gerät passiert.\cite{FairEmailFAQMd} \\
Nachdem der definierte \hl{unsnooze} Zeitpunkt erreicht ist wird die Email wieder sichtbar und als ungelesen markiert. Außerdem wird ein Uhr-Symbol angezeigt, welches darauf verweist, dass die Email \hl{gesnoozed} wurde.

\begin{itemize}
	\item 'snoozing is done locally on the device by hiding the message while it is snoozing. Unfortunately, it is not possible to hide messages on the email server too. Deleting messages from the server and restoring them later could result in losing messages when the device breaks.' \cite{FairEmailFAQMd}
\end{itemize}

\subsection{Thunderbird}
Thunderbird\footnote{Thunderbird: \url{https://www.thunderbird.net/de/}} hat keine Snooze Funktionalität. Allerdings gibt es ein Add-On mailmindr\footnote{mailmindr: \url{https://mailmindr.net/de/}}, welches lokales \hl{snoozen} in Thunderbird ermöglicht. Dabei werden die Emails in einen, vom Nutzenden definierten Ordner, verschoben. Beim \hl{unsnoozen} wird neben dem zurückschieben der Email noch eine Funktionalität ausgeführt, die vom Nutzenden definiert wird. Beispielsweise das Makieren als ungelesen der Email.\\
Es gibt in Thunderbird auch die Möglichkeit Emails zu taggen. Dazu gibt es fünf vordefinierte Tags, wobei der fünfte Tag \enquote{Later} heißt. Intern wird der Tag als \enquote{\$label5} geführt. Diese fünf Label werden auch von anderen Email Clients wie z.B. der Nextcloud Mail App verwendet. In Thunderbird lässt sich nach diesem Tag filtern, was auch eine Möglichkeit bietet Emails zu verstecken und zu einem anderen Zeitpunkt erneut anzuschauen.

\begin{itemize}
	\item Permaflags erklären oder oben
\end{itemize}

\section{AT: Environment Implementierung}
\label{sec:EnvironmentImpl}

Clients, welche es auf verschiedenen Plattformen gibt, z.B. als App und Web Client haben meistens eine Syncronisation der Metadaten im Hintergrund über einen Nutzendenaccount. Dabei ist die Snooze Funktionalität in diesen Clienets meist interoperabel aber nicht über diese Umgebung hinaus. Die folgenden Clients bzw. Anbieter fallen darunter:

\subsection{GMail}
Gmail\footnote{Gmail: \url{https://www.google.com/intl/de/gmail/about/}} hat die Snooze-Funktionalität am 25.Juli 2018 eingeführt. \cite{NewGmailNow} Um zu verstehen, wie das \hl{snoozen} funktioniert, muss erst einmal erläutert werden, wie Gmail generell Ordner/Mailboxen umsetzt. Für die Organisation werden sogenannte Label angeboten, welche den Emails zugewiesen werden können. \cite{GmailMithilfeLabels} Diese Label sind dann vergleichbar mit Ordnern und können über das Menü einzeln gelistet werden. Über IMAP werden die Labels als Ordner/Mailboxen Zurückgegeben. \cite{IMAPExtensionsGmail} Emails, welche beispielsweise das Label \enquote{Wichtig} zugeordnet bekommen, werden über IMAP als Email des Ordners/der Mailbox \enquote{Wichtig} gelisted.\\
Wenn eine Email in Gmail aus dem Posteingang \hl{gesnoozt} wird, wird das Label \enquote{Posteingang} entfernt und die Email wird in Gmail unter dem Reiter \enquote{Zurückgestellt} bzw. \enquote{Snoozed} gelisted. Falls die Email das Label \enquote{Posteingang} nicht mehr besitzt und ein anderes Label hat, wird dieses nicht entfernt. Durch das Entfernen des Labels \enquote{Posteingang} wird die Email über IMAP nicht mehr im Posteingang/Inbox angezeigt. Da Gmail den \hl{gesnoozten} Emails aber kein Label extra zuordnet, sind die Emails, welche aus dem Posteingang \hl{gesnoozt} werden, über IMAP nicht mehr auffindbar. Lediglich in einem Ordner, welcher alle auf dem Gmail Account existierende Email beinhaltet, werden die \hl{gesnoozten} Emails noch angezeigt. \\
Nachdem der definierte \hl{unsnooze} Zeitpunkt erreicht ist wird die Mail mit dem Label \enquote{Posteingang} versehen und wird damit auch für IMAP wieder sichtbar im Posteingang gelistet. Die Email wird nicht als ungelesen markiert aber in Gmail an den Anfang des Posteingangs sortiert.

Gmail gibt damit anderen Clients gar keine Möglichkeit über IMAP zu ermitteln, welche Emails gerade \hl{gesnoozt} sind.

\subsection{Exchange/Outlook}
Outlook\footnote{Outlook: \url{https://outlook.live.com/owa/}} ermöglicht es Emails aus der Inbox zu \hl{snoozen}. Die Emails werden dann in der Outlook App unter dem Reiter \enquote{Erneut erinnern} und in Outlook Webmail unter \enquote{Erneut erinnern aktiviert} gelistet. Über IMAP werden die Emails in einen Ordner \enquote{Erneut erinnern aktiviert} verschoben, wobei sich der Name dieses Ordners je nach Spracheinstellungen ändert. Wenn der \hl{unsnooze} Zeitpunkt erreicht ist, wird die Email zurück in die Inbox verschoben und als ungelesen markiert. In Outlook wird die Email darüber hinaus an den Anfang der Inbox sortiert.

\subsection{Apple Mail}
Apple Mail\footnote{Apple Mail: \url{https://support.apple.com/mail}} hat seit iOS 16 und macOS Ventura (13) eine \enquote{Remind me} Funktion.\cite{HowUseApple2022} In der Inbox befindliche Emails \cite{RemindMeOptions} lassen sich dabei mit einer Erinnerung versehen. Die Email wird dabei aber nur mit einem Uhr Symbol dargestellt und nach dem Zeitpunkt des \hl{unsnoozen} an den Anfang der Inbox sortiert. Über IMAP ist die \enquote{Remind me} Funktion gar nicht zu erkennen.

\subsection{Mailspring}
Mailspring\footnote{Mailspring: \url{https://www.getmailspring.com/}} ist ein Desktop Email Client für Linux, Mac und Windows. Die Snooze Funktion ist sowohl in der Basic als auch in der Pro Version verfügbar, wobei die Pro Version unbegrenztes \hl{snoozen} erlaubt.\cite{SnoozeEmailsHandle2021} \\
Emails, welche \hl{gesnoozt} werden, verschiebt Mailspring in einen Unterordner \enquote{Snoozed} des Ordners \enquote{Mailspring}. Beim \hl{unsnoozen} wird die Email zurück in die Inbox verschoben. Zusätzlich wird eine neue Email generiert, welche über einen Thread der \hl{ungesnoozten} Email zugeordnet wird. Diese Email ist als ungelesen markiert und hat die aktuelle Zeit als Empfangszeit. Dadurch wird der Thread, und damit auch die \hl{ungesnoozte} Email, am Anfang der Inbox angezeigt, was sogar ermöglicht, dass auch über IMAP die Email wieder an den Anfang der Inbox verschoben wird.

\begin{itemize}
	\item Noch auf Thread Funktionalität eingehen oder oben erklären
\end{itemize}

\subsection{Spark}
Spark\footnote{Spark: \url{https://sparkmailapp.com/de}} ist ein Email Client für Windows, Android, Mac und iOS, welcher auch \hl{snoozen} kann.\cite{EMailsFuerSpaeter} Die Snooze Funktionalität verschiebt die Email aus dem jeweiligen Ordner und zeigt sie unter dem Reiter \enquote{Snoozed} an. Über IMAP wird die Email in einen Ordner \enquote{Later} verschoben. Beim \hl{unsnoozen} wird die Email zurück in die Inbox verschoben (egal ob sie aus der Inbox oder einem anderen Ordner heraus \hl{gesnoozed} wurde). Zusätzlich wird die Email als ungelesen markiert und in den Spark Clients an den Anfang der Inbox sortiert. Syncronisiert werden die snooze Informationen über einen Spark Account, welcher automatisch beim einbinden des ersten Email Accounts angelegt wird. Wenn man bei einem anderen Spark Client den primären Email Account hinzufügt, werden die snooze Informationen auch auf dem neuen Client übernommen. \cite{SyncSparkMultipleb}

\subsection{Fastmail}
Fastmail\footnote{Fastmail: \url{https://www.fastmail.com/}} ist ein Email Client für Android, iOS und Web, welcher die Snooze Funktionalität als kostenpfichtiges Feature anbietet. Auch der IMAP Zugriff ist eine kostenpflichtige Funktionalität und lässt sich im Gegensatz zu Snooze Funktionalität nicht mit einem kostenlosen Account testen. Laut Fastmail ist die Snooze Funktionalität auf Fastmail beschränkt und andere Clients, welche z.B. über IMAP auf den Account zugreifen, haben keinen Zugriff auf diese Funktionalität.\cite{SnoozingMail}
Wenn eine Email in Fastmail \hl{gesnoozt} wird, dann wird sie aus dem Ordner in dem sie sich befindet ausgeblendet und unter dem Reiter \enquote{Snoozed} gelistet. Beim \hl{unsnoozen} wird die Email wieder in dem Ursprungsordner angezeigt und an den Anfang des Ordners sortiert. Der gelesen Status wird nicht geändert.

\begin{itemize}
	\item (Behauptung Fastmail benutzt IMAP nutzt draft-ietf-sieve-imap-sieve-09 kombiniert mit draft-ietf-extra-sieve-snooze)
	\item \hl{Hier evt auf JMAP eingehen?}
\end{itemize}

\subsection{Zoho Mail}
Zoho Mail\footnote{Zoho Mail: \url{https://www.zoho.com/de/mail/}} bietet die Snooze Funktionalität. \cite{SnoozeEmailsLater} Aber auch hier ist der IMAP Zugriff ein kostenpflichtiges Feature. \cite{ZohoMailFlexibles} In Zoho Mail wird beim \hl{snoozen} die Email unter dem Reiter \enquote{Snoozed} gelistet und aus dem ehemaligen Ordner entfernt. Beim \hl{unsnoozen} wird die Email in die Inbox verschoben (egal, aus welchem Ordner heraus sie \hl{gesnoozt} wurde) und der ungelesen Status wird nicht geändert. Auch wird die Email nicht an den Anfang der Inbox sortiert.


\section{AT: Interoperable Implementierungen}
\label{sec:InteropImpl}

Im folgenden werden Implementierungen in Email Clients betrachtet, welche einen interoperablen Ansatz verfolgen und somit theoretisch von allen Email Clients benutzt werden können.

\subsection{Roundcube}
Roundcube\footnote{Roundcube: \url{https://roundcube.net/}} ist ein selbstgehosteter Webmailer und kann von sich aus nicht snoozen. Es gibt allerdings ein Plugin roundcube-snooze\footnote{roundcube-snooze: \url{https://github.com/toptensoftware/roundcube-snooze}}, mit dem es möglich ist Emails zu \hl{snoozen}. Beim \hl{snoozen} wird dabei der Header der Email bearbeitet. Da Emails aber nicht bearbeitbar sind wird die Email dubliziert und der Header wird bearbeitet, bevor die neue Email gespeichert wird. Die alte Email wird gelöscht. Beim bearbeiten wird ein \hl{Header-Tag} \textit{X-Snoozed} hinzugefügt, welcher den Zeitpunkt des Snooze als auch den zukünftigen Zeitpunkt des \hl{Unsnooze} enthält. Außerdem wird der Name der Mailox, aus dem die Email \hl{genoozt} wurde und der aktuelle Status gespeichert.\cite{robinsonSnoozeRoundcube2023} Im folgenden ist der Header-Tag einer Beispiel-Email zu sehen, welche bereits \hl{unsnoozt} ist.

\begin{verbatim}
  X-Snoozed: at Fri, 13 May 2022 10:16:56 +1000;
    until Fri, 13 May 2022 10:17:00 +1000;
    from INBOX;
    woken
\end{verbatim}

Zusätzlich wird die Email in eine Snoozed Mailbox verschoben.\\
Ein Aufwachskript, welches auf dem Webserver des Webmailers installiert wird, schiebt die Email nachdem der \hl{unsnooze} Zeitpunkt erreicht ist zurückn und das Keyword \textit{woken} wird im Header-Tag \textit{X-Snoozed} gesetzt.\cite{robinsonSnoozeRoundcube2023}\\
Dadurch, dass der Header der Email bearbeitet wird, können alle anderen Email Clients diese Information sehen und dementsprechend die Informationen theoretisch darstellen.\\
Die entwickelnde Person macht aber klar, dass es sich um eine sehr experimentelle Implementierung handelt, welche nicht ausgibig getestet wurde und nur auf DoveCot\footnote{DoveCot: \url{https://www.dovecot.org/}} ausgerichtet ist.\cite{robinsonSnoozeRoundcube2023}


\subsection{eM Client}
Der eM Client\footnote{eM Client: \url{https://de.emclient.com/}} ist ein Email Client für Windows und Mac. Mobile Clients für Android und iOS sind aber bereits in der Beta verfügbar. \cite{EMClientBeta} \\
Die Snooze Funktionalität ist ein kostenpflichtiges Feature in der Pro Version. \cite{Snooze} Allerdings lässt sich in der Android App auch ohne Pro \hl{snoozen}. Beim \hl{snoozen} wird der Email ein \hl{Label} zugeweisen,\hl{(Permaflag, ref auf oben)} welches mit \enquote{\$SnoozedUntil\_} beginnt und von dem \hl{Unsnooze} Zeitpunkt als Unix Timestamp gefolgt wird. Daraus entsteht beispielsweise das folgende Label: \enquote{\$SnoozedUntil\_162597600}\\
In den eM Clients werden die Emails mit solch einem Label, bei dem der Timestamp in der Zukunft liegt, in der Inbox ausgeblendet. Die Email kann dann unter dem Reiter \enquote{Snoozed} gefunden werden. Nach dem \hl{unsnoozen} wird die Email wieder sichtbar.\\
Da das Label durch andere Email Clients abgerufen werden kann, ist es theoretisch möglich, dass auch andere Clients die Email \hl{gesnoozt} darstellen.


\section{AT: Fazit}
\label{sec:FazitExistingSolution}

Wie man sehen kann, gibt es viele verschiedene Implementierungen einer Snooze Funktionalität. Teilweise sehr unterschiedlich aber oft auch mit gleichen Ansätzen. Generell fällt auf, dass oft versucht wird auf lokale Implementierungen zu setzen. Viele Clients legen eine extra Mailbox an um die gesnootzen Emails dorthin zu verschieben. Das ist in gewisser Weise eine Möglichkeit für andere Clients zumindest zu erkennen, welche Emails gesnoozt sind und welche nicht. Allerdings sind die Namen dieser Mailboxen nicht einheitlich und unterscheiden sich sogar teilweise in der eigenen Umgebung, wie es bei Outlook der Fall ist. Auch das Verhalten der Clients nach dem unsnoozen unterscheidet sich stark. Vom reinen wieder einblenden bis als ungelesen an den Anfang der Mailbox sortieren und mit einem besonderen Symol makieren ist alles dabei.
Nichts destotrotz gibt es auch Lösungsansätze, welche versuchen eine interoperable Implementierung zu nutzen. Auf diese und andere interoperable Ansätze wird im nächsten Kapitel näher eingegangen.

\chapter{AT: Diskussion Lösungsansätze}
\label{sec:DisskussionLoesung}

Das folgende Kapitel widmet sich, nach der Analyse existierender Lösungen im vorherigen Kapitel, dem schaffen/beleuchten/analysieren interoperablen Lösungen für eine Snooze Funktion. Dabei werden Ansätze von den bereits existierenden Implementierugen noch einmal aufgegriffen und neue/andere Ansätze beleuchtet. Das Ziel ist, dass die Ansätze/Lösungen nicht dazu führen, dass andere Clients, welche diesen Ansatz/Lösung nicht implemntiert haben verwirrt werden \hl{FORMULIERUNG} und wie bei Gmail z.B. gesnoozte emails nicht mehr aufzufinden sind. Im besten Fall ist auch für Clients ohne die Implementierung eines Ansatztes erkennbar, dass eine Email gesnoozt ist. \\
Der Fokus liegt auf der Verwendung bereits existierender Funktionalitäten im IMAP Protokoll oder Erweiterungen dieser durch sogenannte Extentions. Aber auch das Ausnutzen der Strucktur einer Email ist ein bevorzugter Ansatz. Grund dafür ist, dass je näher man am Standard bleibt oder auf bereits etablierte Erweiterungen setzt, umso wahrscheinlicher ist am Ende auch, dass die eigene Implementierung eines Ansatzen Verbreitung findet.

\section{AT: Was muss möglich sein}
\label{sec:WasMussMoeglich}

Um die Lösungsansätze bewerten zu können ist es nötig nochmal klar zu formulieren, welche Aufgaben eine Snooze Funktion erfüllen muss und welche Funktionen darüber hinaus wünschenswert wären, damit man von einem interoperablen Ansatz eines Snooze Features sprechen kann.\\
Der erste erforderliche Aufgabe ist, dass erkennbar sein muss, welche Email gesnoozt ist und welche nicht. Auch muss ermittelbar sein, bis wann die Email gesnoozt ist, also wann sie wieder unsnoozt werden soll. Aus welcher Mailbox eine Email gesnoozt wurde, ist wichtig, wenn die Email beim Snoozen in eine andere Mailbox verschoben wird. Wie in der Analyse der existierenden Implementierungen beschrieben gibt es für dieses Verhalten keine Einheitlichkeit. Manche Clients verschieben in die Mailbox zurück, aus der gesnoozt wurde, andere konsequent in die INBOX. Für den Fall, dass diese Information nicht ermittelbar ist kann die Email aber immer in die Inbox verschoben werden, weshalb diese Information nicht unbedingt vorhanden sein muss. Auch die Information, seit wann eine Email gesnoozt ist, ist für die Funktionalität der Snooze Funktion nicht entscheident, können durch den Client bei Verfügbarkeit aber dargestellt werden.\\
Zum Schluss muss sichergestellt werden, dass beim unsnooze Prozess keine Inkonsitenten Daten enstehen, weil z.B. mehrere Clients gleichzeitig eine Email unsnoozen.

\section{AT: Welche Möglichkeiten gibts}
\label{sec:WelcheMoegGibts}

\subsection{AT: Keywords}

Der erste Lösungsansatz, der beleutet wird ist die Verwendung von \hl{Keywords}. Dabei werden die durch IMAP definierten \hl{Permaflags} genutzt. Wie bereits erläutert können diese von den Clients erstellt und den einzelenen Email zugeordnet werden. Es ist zwar möglich, dass der Mailserver das erstellen eigener \hl{Permaflags} nicht gestattet, was aber nur sehr selten der Fall ist.

Angeleht an die Implementierung in Thunderbird, wo es ein \hl{Label} \enquote{Later} gibt, könnte hier ein \hl{Label} \enquote{Snooozed} eingeführt werden. Dieses \hl{Label} würde dann die Aufgabe erfüllen Emails zu identifizieren, welche \hl{gesnozt} sind. Es ist auch möglich direkt das \hl{Label} \enquote{Later} von Thunderbird zu adaptieren für diesen Zweck. Da Later im Fall von Thunderbird eine sehr ähnliche Bedeutung hat wie ein Snooze hat und intern als \enquote{\$label5} implementiert ist, könnten dieses \hl{Label} auch \enquote{Snoozed} heißen und somit direkt in mehreren Clients funktionieren. Zu beachten ist hier aber, dass dieses \enquote{Label} nur die Information repräsentiert, welche Mail \hl{gesnoozt} ist, nicht aber für wie lange. Deshlab kann dieser Ansatz höchstens ein Teil einer interoperablen Lösung sein.

Ein anderer Ansatz basierend auf der Verwendung von \hl{Keywords}, ist die Implementierung des eM Clients. Das \hl{Label}, welches dort beim \hl{snoozen} gesetzt wird besteht aus der ersten Hälte \enquote{\$SnoozedUntil\_} und der zweiten Hälte, welche ein UNIX Timestamp ist, z.B. \enquote{162597600}. Dabei würde die erste Hälte die Aufgabe erfüllen, zu identifizeiren, welche Email \hl{gesnoozt} ist und die zweite Hälfte die Zeit definieren, wann die Email \hl{unsnoozt} werden soll. Das Problem dieses Ansatzen liegt im Design des \hl{Labels}. Da der UNIX Timestamp Teil des \hl{Labels} ist, ist jedes \hl{Label} unterschiedlich. Ausgenommen der Fall, dass zwei oder mehr Emails gleichzeitig \hl{gesnoozt} gesnoozt werden. Dies fürt dazu, dass bei jedem \hl{snoozen} ein neues \hl{Label} erstellt wird, welches dann durch den Mailserver gespeichert und bei jeder \enquote{SELECT} Anfrage zurückgegeben wird. Zwar definiert der IMAP Standard keine maximale Anzahl an \hl{Labeln}, welche durch die Clients erstellt werden dürfen, allerdings kann der Mailserver das Erstellen neuer \hl{Label} unterbinden, falls die Anzahl eine interne grenze überschreitet, indem die \hl{PERMAFLAG} Antwort kein \textbackslash* enthält. \cite{melnikovInternetMessageAccess2021} Außerdem nutzen manche Clients wie z.B. FairEmail die \hl{PERMAFLAG} Antwort um eine Liste an möglichen \hl{Labels} zu generieren, die einer Email zugewiesen werden können. Ein Heruasfiltern dieser \hl{Label} ist in diesem Fall wahrscheinlich ein annehmbarer Aufwand, den die Clients betreiben müssten. Aber auch generell entsteht durch diesen Ansatz eine sich schnell aufsummierende Masse an Daten, sowohl auf dem Mailserver als auch im Datenverkehr zwischen Client und Server, welche nur bis zu einem bestimmten Zeitpunkt gebraucht werden. Eine Möglichkeit \hl{Labels} zu löschen oder ein mechanismus, der dafür sorgt, dass ncht mehr verwendete \hl{Labels} Serverseitig gelöscht werden, wäre für diesen Ansatz wünschenswert und notwendig.

\begin{itemize}
	\item Was sind die IMAP Keywords??!? Wie unterscheiden sich Flags/Permaflags und der die anderen Begriffe (eher oben erklären, da bereits verwendet)

\end{itemize}

\subsection{AT: Header bearbeiten}

\begin{itemize}
	\item evt header näher erklären (oder oben)
\end{itemize}

Der nächste Lösungsansatz, ist das Bearbeiten des Email Headers wie es das roundcube plugin roundcube-snooze umsetzt. Dabei wird der Email, welche \hl{gesnoozt} wird ein neues \hl{Header Feld} \textit{X-Snoozed} hinzugefügt. Im folgenden ist noch einmal das bereits verwendete Beipiel aufgeführt: 

\begin{verbatim}
  X-Snoozed: at Fri, 13 May 2022 10:16:56 +1000;
    until Fri, 13 May 2022 10:17:00 +1000;
    from INBOX;
    woken
\end{verbatim}

Das neue Header Feld enthät sowohl den genau Zeitpunt des \hl{snooze} (at) als auch des \hl{unsnooze} (until) in Form von einem in RFC2822\footnote{RFC2822 - Internet Message Format: \url{https://datatracker.ietf.org/doc/html/rfc2822}} definierten Timestamps. Zusätzlich wird der Name der Mailbox gespeichert, aus dem die Email gesnoozt wurde (from). Das Schlüsselwort \enquote{woken} wird dem Header Feld angehängt, wenn die Email wieder \hl{unsnoozt} wurde. Mit diesem Ansatz und den gespeicherten Informationen lassen sich alle definierten Anforderungen an ein Snooze Feature realisieren.

Da dieser Lösungsansatz die Header einer Email bearbeitet, sind auch noch weitere Einflüsse zu beachten. Es könnte die Frage aufkommen, in wie weit durch das Bearbeiten der Header Verschlüsselung und Signierung durch S/MIME beieinflusst werden können. Diesbezüglich ist bei richitger Implementierung allerdings keine Gefahr zu beführchten. S/MIME kann durch das einschließen bestimmter Header in einen sogenannten \enquote{message/rfc822 wrapper}, auch nicht Inhaltsbezogene Header wie z.B. den \enquote{To} Header schützen. \cite{schaadSecureMultipurposeInternet2019} \cite{resnickInternetMessageFormat2001} Allerdings sind diese explizit auszuwählen. Es gibt äußere Header, welche für S/MIME nicht relevant sind. Wenn der \textit{X-Snoozed} Header als einer dieser äußeren hinzugefügt wird, ergibt sich somit kein Einfluss auf S/MIME.\\
Auch Erweiterungen, wie RFC7508\footnote{RFC7508 - Securing Header Fields with S/MIME \url{https://datatracker.ietf.org/doc/rfc7508/}} basieren auf der Auswahl bestimmter Header, welche geschützt werden und es erlauben, Header hinzuzufügen ohne die Sicherheitsmechanismen \hl{kaputt} zu machen. \cite{cailleuxSecuringHeaderFields2015}

Ein Problem dieses Ansatztes ist, dass die Header einer Email eig. nicht durch den empfangenden Client bearbeitet werden. \hl{Dazu gibts ja IMAP und Erweiterungen, um die Nachricht an sich unberührt zu lassen... Hier irgendwie noch begründen}

\subsection{AT: Metadaten Speichern}

Ein weiterer Lösungsansatz ist die Verwendung der RFCs 5257\footnote{RFC5257 - Internet Message Access Protocol - ANNOTATE Extension \url{https://datatracker.ietf.org/doc/html/rfc5257}} (Internet Message Access Protocol - ANNOTATE Extension) und 5464\footnote{RFC5464 - The IMAP METADATA Extension \url{https://datatracker.ietf.org/doc/html/rfc5464}} (The IMAP METADATA Extension). Beide Erweiterungen funktionieren sehr ähnlich. Die Annotate Extention ermöglicht zu jeder Email seperat Informationen abzuspeichern, die Metadata Extention dagegen zu Mailboxen und auf Server Ebene. Die Annotate Extention ist eine Experimentelle Erweiterung von 2008.\cite{dabooInternetMessageAccess2008} Aufgrund dessen fällt die Implementierung in Mailservern eher gering aus.\cite{boschSpecsUnofficialIMAP} Gerade DoveCot als verbreitetster IMAP Mailserver \hl{BELEG} unterstützt diese Erweiterung nicht. Die Metadata Erweiterung dagegen ist Teil des Standards und wird von DoveCot implementiert.\cite{boschSpecsUnofficialIMAP} Es wird im folgenden der Lösungsansatz anhand der Metadata Erweiterung erklärt, obwohl die Annotate Erweiterung eine bessere Grundlage für das Snooze Feature bietet, da Informationen direkt auf Email Ebene abgespeichert werden können. Für die Metadaten Erweiterung spricht in diesem Fall aber die bereits existierende Standardisierung und somit vorhandene Implementierung in vielen IMAP Mailservern.

Die Metadata Erweiterung führt neue IMAP Befehle ein für das setzen und abrufen der Metadaten. Um auf Informationen auf Mailbox Ebene zuzugreifen ist der Mailboxname als erstes Argument mitzugeben. Um auf die Informationen auf Serverebene zuzugreifen wird ein leerer String als Argument mitgegeben. Der Speicher pro Mailbox bzw. für den Server ist dann Hirarchisch aufgebaut und besteht aus Eintragspaaren bestehend aus Name und Wert. Der Name des Eintrages beginnt mit einem \enquote{/} und wird von Worten gefolgt, wie wiederum mit \enquote{/} getrennt sind. Dieser Aufgabau bildet dann die Hirarchie der Einträge.\\
Die oberste Hirachrchie-Ebene besteht aus zwei Möglichkeiten: \enquote{/private} und \enquote{/shared}. Unter private sind Einträge zu findne, welche nur durch den eigeloggten Nutzenden abgerufen werden können. Unter shared befinden sich Einträge, welche für alle Nutzenden, die Zugriff auf diese Mailbox oder den Server haben abrufbar sind. Die nächste Hirarchiebenede besteht aus vordefinierten Möglichkeiten wie z.B. \enquote{/private/comment} oder \enquote{/shared/comment} für eine Notiz zur Mailbox. An dieser Stelle könnte man ansetzten und eine Eintrag \enquote{/private/snoozed} für eine spezielle Snoozed Mailbox erzeugen. In diese Mailbox werden die \hl{gesnoozten} Emails verschoben und als Wert des Eintrages wird ein JSON Objekt gespeichert, welches zu allen in der Mailbox befindlichen Emails die notwendigen Snooze Informationen abspeichert.

\begin{itemize}
	\item Evt noch drauf eingehen, dass Wert von Eintrag mehrzeitlig sein kann und string NIL oder binary data sein kann
	\item Evt auf min von 10 Einträge pro Mailbox müssen erlaubt sein, darüer hinaus vom server einschrenkbar, eingehen
\end{itemize}


\subsection{AT: Referenze Email}

Ein weiterer Ansatz ist das Speichern der Snooze Informationen in einer extra Email ähnlich zur Implementierung, die Mailspring verwendet um Emails an den Anfang der Inbox zu sortieren. Beim snoozen würde dabei eine neue Email erzeugt werden, welche \hl{per Referenz} der eigentlichen Email angehängt wird. Über ein Attribut dieser neuen Email, welches defineirt ist kann dann die Email im Client ausgeblendet, sodass nur die eigentliche \hl{gesnoozte} Email sichtbar ist. Für dieses Attribut gibt es mehrere Möglichkeiten. Beispielsweise kann eine \hl{Keyword} \enquote{Hidden} eingeführt werden, welches den Clients mitteilt, dass die Email mit diesem \hl{Keyword} unsichtbar sein soll. Es kann auch ein Header in der Email einen bestimmten Wert haben. Beispielsweise könnte man den Subject Header auf \enquote{SNOOZEDMETADATA} setzen. Wichtig ist, dass dieses Attribut einheitlich und eindeutig definiert ist. Im Body der Email könnten dann die Informationen zum Snooze der eigentlichen Email in Form z.B. eines JSNON Objekts stehen.

Für ander Clients, die diesen Ansatz nicht implementieren, ensteht wie auch bei Mailspring eine extra Email, die eigentlich kein relevanten für den Nutzenden hat. Viele Email Clients bieten implemntieren zwar die Thread Funktionalität und würden die extra Emial nur bei Auswahl der eigentlichen Email anzeigen, trotzdem kann dies zu Unübersichtlichkeit und Verwirrung führen.

\subsection{AT: Dedicated Ordner}

Alle bis jetzt beschriebenen Lösungsansätze, mit ausnahme der Benutzung der Metadata Erweiterung, erfüllen die Aufgabe, erkennbar zu machen, welche Email gesnoozt ist, ohne eine extra Mailbox anzulegen. Das heißt aber auch, dass Clients, welche keine Implementierung einer dieser Ansätze verfolgen, zu Verwirrung und Unübersichtlichkeit führen können, wenn mehrere Clients benutzt werden. \cite{SnoozedEmailsStay2022} Es ist deshalb sinnvoll eine extra Mailbox anzulegen, welche \hl{gesnoozte} Emails aufbewahrt, bis sie wieder \hl{unsnoozed} werden. Dieses Verhalten gibt es bereits in vielen Clients, welche ein Snooze Feature implementiert haben. Allerdings gibt es in der Namensgebung dieser Mailbox, wie bereits erwähnt, viele Unterschiede. Ein einheitlicher Name wie z.B. \enquote{Snoozed} wäre hier sinnvoll.

Für eine interoperable Lösung kann sich an der Idee der \enquote{Special-Use Mailbox} orientiert werden, welche im  RFC6154\footnote{RFC6154 - IMAP LIST Extension for Special-Use Mailboxes: \url{https://datatracker.ietf.org/doc/rfc6154/}} definert wird und bereits Teil des offiziellen IMAP Standards in der neusten Version (4rev2\footnote{RFC9051 - Internet Message Access Protocol (IMAP) - Version 4rev2: \url{https://datatracker.ietf.org/doc/html/rfc9051}}) ist. Dabei gibt der Server beim Listen der Mailboxen bestimmte Attribute zurück, welche näher beschreiben, was in der Mailbox zu finden ist oder was dort hinein gehört. \cite{melnikovInternetMessageAccess2021} Es gibt definierte fest definierte Attribute, wie z.B. \enquote{\textbackslash{Archive}} oder \enquote{\textbackslash{Drafts}}, welche eine Mailbox für archivierte Nachrichten und eine Mailbox für Entwürfe spezifiziert. An dieser Stelle könnte eine Erweiterung des Standards um ein Attribut \enquote{\textbackslash{Snoozed}} angestrebt werden, welches dann für alle Clients klar definiert, welche Mailbox die Aufgabe hat \hl{gesnoozte} Emails aufzubewahren.

\subsection{AT: Savedate}

\begin{itemize}
	\item zum Anfang sortieren  [partielle Lösung]
	\item Internet Message Access Protocol (IMAP) - SAVEDATE Extension
\end{itemize}

\subsection{AT: Wer übernimmt das verschieben}

\begin{itemize}
	\item Alle Lösungsansätze schaffen nur die Grundlage um das waken/unsnoozen zu ermöglichen, das zurückmoven usw ist extra Aufgabe und muss durch den Server oder Client gemacht werden
	\item welche Probleme treten beim sync auf [partielle Lösung]
	\item IMAP Extensions: Quick Flag Changes Resynchronization (CONDSTORE) and Quick Mailbox Resynchronization (QRESYNC)
\end{itemize}

\section{Fazit}
\label{sec:LoesungFazit}

\begin{itemize}
	\item 
\end{itemize}


\begin{itemize}
	\item (JMAP (nicht IMAP aber, sollte erwähnt werden), vlt aber eher bei sparkmail.)
\end{itemize}

\section{AT: Nextcloud Mail App}
\label{sec:LoesungNextcloud}

\begin{itemize}
	\item Welcher Lösungsansatz passt am besten in die App
	\item horde (was kann, was nicht)
	\item 
\end{itemize}


\chapter{AT: Vorschlag Standarderweiterung}
\label{sec:VorschlagStandard}

\begin{itemize}
	\item Was ist RFC?
	\item Wie könnte ein RFC für eine Snooze aussehen
	\begin{itemize}
		\item Flags erweitern um Snoozed
		\item Special use mailboxes erweitern um Snoozed oder zumindest einheitlicher Name
	\end{itemize}
\end{itemize}
