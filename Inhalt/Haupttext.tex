\chapter{AT: Einführendes Kapitel}
\label{sec:Intro}


Die E-Mail ist trotz des alten Standards \hl{(REF)} immernoch eine sehr weit verbreitetes Kommunikationsmittel. Viele haben mindestens 2 E-Mail Adressen \cite{EMailNutzung2021Mailjet} um ihre persöhnlichen Emais zu verwalten. Dazu kommen E-Mail Adressen im Beruflichen Kontext. \hl{(Zahlen)} Auf der persöhnlichen Haupt-E-Mail Adresse ist es nicht ungewöhlich, dass 20 E-Mails pro Tag \cite{EMailNutzung2021Mailjet} eingehen. Wenn man die E-Mails aus den anderen persöhnlichen und beruflichen E-Mail Adressen dazurechnet kommt schnell eine große Zahl heraus. Je mehr E-Mails wir bearbeiten müssen desto mehr Zeit muss auch eingeplant werden. Die Mehrheit überprüft ihre E-Mails mindestens zweimal am Tag. Und ein viertel sogar mehr als fünfmal am Tag. \cite{EMailNutzung2021Mailjet} Nicht selten ist das überprüfen der E-Mails eine stressige Aufgabe. Man kommt einfach nicht hinterher. \hl{(Belegen)} Viele E-Mail Clients versprechen, dass sie das E-Mail Management einfacher und effizienter machen. Dazu bieten sie verschiedene Möglichkeiten. Eine davon ist die Snooze Funktionalität, welche es ermöglicht E-Mails für eine gewisse Zeit aus dem Blickfeld verschwinden zu lassen um sie zu einem späteren Zeitpunkt noch einmal bearbeiten zu können.

\section{AT: Problemstellung}
\label{sec:Problemstellung}

Es gibt E-Mail Clients, welche die Snooze Funktion bereits implementieren, es gibt aber auch viele die es nicht tun. Unter denen, die diese Funktion bereits implementiert haben gibt es allerdings durchaus gravierende Unterschiede in der Umsetzung. Obwohl die Mehrheit der Nutzenden auf große Anbieter zurückggreift \cite{EmailClientMarketa}, ist es gerade für Personen, die Wert darauf legen, nicht von den großen Marken wie Google oder Microsoft abhänig zu sein wichtig einen offenen Standard zu haben, mit dem das E-Mail Management möglich ist. Da E-Mail ein offener Standard ist gibt es auch einen Standard für das E-Mail Managment, also das verwalten des Postfachs. Dieser Standard heißt IMAP (Internet Message Access Protocol). Wenn nun neue Funktionen erfunden werden um das E-Mail Management zu verbessern, ist es notwendig, dass diese auch ihren Weg in den offenen Standard finden um allen Clients eine Implementierung zu ermöglichen. Für die Snooze Funktion gibt es noch keine Standardisierung, weshalb zu sehen ist, dass viele Clients die Funktion sehr unterschiedlich und nicht interoperabel implementieren. Somit lässt sich diese Funktion nicht Client übergreifend nutzen. Es fehlt ein einheitlicher Lösungsansatz in Form einer Standarderweiterung des IMAP Protokolls, der definiert wie diese Funktionalität aussieht und damit eine interoperabele Umsetzung ermöglicht.

\section{AT: Zielstellung}
\label{sec:Zielstellung}

Das Ziel dieser Arbeit ist, die bestehenden Implementierungen der einzelnen Clients zu analysieren und herauszufinden, inwieweit sich diese Lösungen als interoperable Lösung bereits nutzen lassen. Weiter soll geschaut werden, welche Möglichkeiten der IMAP Standard noch bietet, um eine Snooze Funktion interoperabel umsetzen zu können. \\
Dabei muss der Lösungsansatz bestimmte Aufgaben erfüllen um eine interoperable Implementierung zu ermöglichen. Die erste erforderliche Aufgabe ist, dass erkennbar sein muss, welche E-Mail gesnoozt ist und welche nicht. Auch muss ermittelbar sein, bis wann die E-Mail gesnoozt ist, also wann sie wieder unsnoozt werden soll. Aus welcher Mailbox eine E-Mail gesnoozt wurde, ist wichtig, wenn die E-Mail beim Snoozen in eine andere Mailbox verschoben wird. Für den Fall, dass diese Information nicht ermittelbar ist kann die E-Mail aber immer in die INBOX verschoben werden, weshalb diese Information nicht unbedingt vorhanden sein muss. Auch die Informationen, seit wann eine E-Mail gesnoozt ist, und seit wann wieder geweckt wurde, sind für die Funktionalität der Snooze Funktion nicht entscheident. Zum Schluss muss sichergestellt werden, dass beim unsnooze Prozess keine Inkonsitenten Daten enstehen, weil z.B. mehrere Clients gleichzeitig eine E-Mail unsnoozen.\\
Um zu bewerten wie umsetzbar diese Lösungsansätze sind, wird dies am Beispiel der Nextcloud Mail App beschrieben. Mit den Erkentnissen soll dann beschrieben werden, wie eine Standard Erweiterung aussehen könnte.

\begin{itemize}
	\item Etwas konkretisieren, so dass die Ziele abrechenbar sind.
\end{itemize}


\section{AT: Aufbau}
\label{sec:Aufbau}

Als erstes werden in einem einführenden Kapitel Begriffe und Themen erklärt, die für das Verständnis dieser Arbeit wichtig sind. Dann wird genauer beschrieben, warum es einen interoperablen Ansatz braucht und welche Aufgabe eine Snooze Funktion im effizienten E-Mail Management erfüllt. Das Kapitel \ref{sec:ExistierendeImpl} \hl{Existierende Lösungen} beschäftigt sich dann mit der Betrachtung der existierenden Implementierungen der E-Mail Clients. Darauf folgt die Analyse der existierenden Lösungen in Verbindung mit dem Ermitteln anderer Lösungsansätze für eine interoperable Implementierung. Diese werden dann anhand der Nextcloud Mail App \hl{überprüft}. Im letzten Kapitel wird beschrieben, wie eine Standard Erweiterung für eine Snooze Funktion aussehen könnte.

\iffalse
\begin{itemize}
	\item Relevanz/Abgrenzung/Ziele
\end{itemize}

\begin{itemize}
	\item Zum Thema hinführen (Beispiele), These/Gegenthese, bedeutende Aussage durch namenhafte Persöhnlichkeit, überraschende Feststellung machen, (aktualität?) \hl{Warum ist das Thema interesant, wichtig und spannend (wissebschaftlich als auch für jeden der die arbeit liest)}
	\begin{itemize}
		\item Email immernoch ein viel genutzes Kommunikationsmittel (Zahlen)
		\item Sehr viele Emails werden empfangen (Zahlen)
		\item Nutezende müssen das bearbeiten der Mails möglichst effizient machen um andere Dinge zu schaffen
		\item Es gibt viele Email Clients, die versprechen die Email Kommunikation, schnellfer, effizienter und zukunftsorienteirter zu machen
		\item Emails Snoozen in vielen Clients ein Teil davon
		\item Obwohl viele die großen Anbieter nutzen (Zahlen), ist es gerade für diejenigen, die sich der Macht der großen entziehen wollen und z.b. auf Open Source wert legen notwendig offenen Stanndard für Email Management zu haben
		\item Den gibts auch, IMAP 
	\end{itemize}
	\item Gegenstad/Problemstelung/Ziele, Begründung Wahl der Forschungsfrage indem Forschungslücke erläutert wird \hl{Was ist der Gegenstand meiner Arbeit? Warum habe ich mich für diese Problemstelung entschieden und warum wichtig zu beantworten? Was ist das Ziel der Arbeit?}
	\begin{itemize}
		\item Ich bin selber fan von offenen Standards und der unabhänigkeit von großen Unternehemen wie Google oder Microsoft
		\item deslab ist es wichtig zu schauen, inwieweit neue Features berits durch den existierenden ofenen standard umgsetzt werden können ud falls nicht, dass möglichkeiten für erweitungen erarbeitet wrrden
		\item Das Problem, dass IMAP nur Grundfunktionalitäten zur Verfüugn stellt. Neue Features wie Snooze werden nicht unterstützt.
		\item Deshalb viele verschiedene Implementierungen dieses Features in den Cleints.
		\item untereinander nicht nutzbar (außer leiches Unternehmen, sync über Account)
		\item vereinheitlichung wäre hier Wünschenswert
		\item In der Arbeit soll analysiert werden, wie die einzelnen Clients das Feature implementieren
		\item geschaut werden, inwieweit die Implementieurngen bereits interoperabel sind
		\item dann schauen, welche Möglichkeiten IMAP beitet um dieses Feature interoperabel umsetzen zu können
		\item Oder welche Erweiterungen geschaffen werden müssten
	\end{itemize}
	\item Gang der Untersuchung, Methodik skizzieren, Wie umfassend wurde die Literatur analysiert \hl{Wie lässt sich die Methodik beschreiben, mit der ich meine zentrale Forschungsfrage analysiert bzw. beantowrtet habe?}
	\begin{itemize}
		\item Dazu wird zuerst analysiert, welche clients das feature wie implementiert haben
		\item dann geschaut welche mögichekiten IMAP bietet das Feature zu implementieruen. bzw welche lösungen missbraucht/adaptiert werden könnten
		\item was nötig wäre als erweitung um das ganze zu standardtisieren
		\item das ganze basiert größtenteils auf aussagen der Client entwickler/Firmen oder testen und analysieren der clients
		\item zur standard analyse werden die rfcs zu IMAP benutzt, aber auch disussionen in (foren/Github)
		\item anhand der Nextcloud Mail App wird geschaut wie die analysierte interoperabilität implementiert werden könnte
	\end{itemize}
	\item Abgrenzung der Arbeit, Schwerpukt setzen, Bei bereits vorhandenen Arbeiten darauf hinweisen \hl{Muss ich meine Arbeit eingrenzen? Wie kann ich die Akzentuierung blausiebel begründen?}
	\begin{itemize}
		\item Schwerpunkt ist Möglichkeiten aufzeigen, wie das Snooze Feature über IMAP interoperabel implementiert werden könnte. Dabei sollen vorhandene Standards oder verbreitete Implementierungen vorzugsweise genutzt werden
		\item ...
	\end{itemize}
	\item Aufgabu der Arbeit, wie bin ich generell vorgegangen, um die Forscungsfrage zu beantworten, Damit ist im wesentlichen die Argumentationsline gemeint, die sich aus Ihrer Gliederung ergibt \hl{Wie habe ich meine ArbeitAufgebaut, wie werde ich vorgenen?}
	\begin{itemize}
		\item zuerst die grundlagen (Inbox Zero, IMAP, Email, interoperabel usw.) erklären um das nachfolgende verstehen zu können
		\item dann erklären, warum es einen interoperablen Ansatzt braucht und welche Möglichkeiten braucht man um Inbox Zero umzusetzen, wie sieht snoozen soll Snooze in Email clients aussehen?
		\item dann werden email cients analysiet und genasucht, wie die implementierung aussieht
		\item folgenden werden Lösungsanätze beschrieben, die die snooze interoperabel möglich machen könnten
		\item das ganze wird dann an der Nextcloud Mail app beschrieben
		\item der letzte schritt wäre die beschriebung einer Standardeerweiterung, was müsste diese enthalten
	\end{itemize}
\end{itemize}
\fi


\chapter{AT: What is it, How it works}
\label{sec:HowItWorks}

\section{AT: Allgemein}
\label{sec:General}

\subsection{Getting Things Done und Inbox Zero}

Viele stehen vor dem Problem, dass ihr E-Mail Posteingang \hl{(im folgenden INBOX genannt)} überfüllt ist mit E-Mails, welche noch beantwortet werden müssen. Das E-Mail Postfach öffnen führt zu Stress, und es werden immer mehr E-Mails obwohl man sein bestes gibt diese zu bearbeiten. \cite{barleyEmailSourceSymbol2011} \cite{dabbishEmailOverloadWork2006}

Es gibt Konzepte, mit denen dieses Problem angegangen werden kann. Die meisten basieren auf Getting Things Done, was eine Produktivitätsstrategie ist, die das Ziel hat Aufgaben, Informationen, Probleme oder Projekte extern, also nicht im Kopf, zu verwalten. \cite{GettingThingsDone2023} David Allen hat diese Methode entwickelt und beschreibt in seinem Buch "Getting Things Done: The Art of Stress-Free Productivity", wie Sie funktioniert und anzuwenden ist. \hl{Buch ref?}\\
Auf der allgemeinen Getting Things Done Methode basieren andere Strategien, welche sich auf das E-Mail Management spezialisieren. Inbox Zero ist eine davon, welche von Merlin Mann erstmalig definiert wurde und nicht das Ziel hat keine E-Mails mehr in der Inbox zu haben, wie man es durch den Namen annehmen könnte, sondern eher darauf bezogen ist, kein Stress bei der Bearbeitung der Inbox zu haben. \cite{WhatInboxZero2019} Es geht nicht darum alle E-Mails in der Inbox zu beantworten sondern alle E-Mails zu bearbeiten. Das heißt, dass man sich Aktionen definiert, welche man auf die zu bearbeitende E-Mail anwendet. Das kann das Beantworten der E-Mail sein aber genauso das Löschen oder Zurückstellen der E-Mail. Wichtig ist, dass man ohne viel überlegen entscheidet, welche Aktion auszuführen ist und sich nach ausführen der nächsten E-Mail widmet. \cite{googletechtalksInboxZero2007}

\subsection{AT: Interoperabilität}

Für eine Snooze Funktion, welche von mehreren Clients aus übergreifend genutzt werden kann, ist Interoperabilität entscheidend. Laut dem IEEE\footnote{Institute of Electrical and Electronics Engineers (IEEE): \url{https://www.ieee.org/}} Standard Computer Dictionary ist Interoperabilität \enquote{die Fähigkeit von zwei oder mehreren Systemen oder Komponenten, Informationen auszutauschen und die ausgetauschten Informationen zu nutzen.} \cite{IEEEStandardComputer} Es gibt aber nicht nur diese eine Definition. Eine andere Definition durch ETSI\footnote{European Telecommunications Standards Institute (ETSI): \url{https://www.etsi.org/}} beschreibt Interoperabilität als \enquote{die Fähigkeit von Geräten verschiedener Hersteller (oder verschiedener Systeme), über dieselbe Infrastruktur (dasselbe System) oder über eine andere beim Roaming miteinander zu kommunizieren}. \cite{anthonyAchievingTechnicalInteroperability2008} (Vgl. S. 5)\\
Es gibt verschiedene Kategorien der Interoperabilität: 

\begin{itemize}
	\item \textbf{Technische Interoperabilität:} \enquote{Technische Interoperabilität wird in der Regel mit Hardware-/Softwarekomponenten, Systemen und Plattformen in Verbindung gebracht, die die Kommunikation zwischen Maschinen ermöglichen. Bei dieser Art von Interoperabilität geht es häufig um (Kommunikations-)Protokolle und die für den Betrieb dieser Protokolle erforderliche Infrastruktur.} \cite{anthonyAchievingTechnicalInteroperability2008} (Vgl. S. 5)
	\item \textbf{Syntaktische Interoperabilität:} Syntaktisch interoperabel sind \enquote{Systeme, die über kompatible Formate und Protokolle erfolgreich kommunizieren können. Werkzeuge, die die syntaktische Interoperabilität erleichtern, sind anerkannte Formatierungsstandards, wie XML und SQL. Dies wird manchmal auch als strukturelle Interoperabilität bezeichnet.}\cite{WasIstInteroperabilitaet}
	\item \textbf{Semantische Interoperabilität:} \enquote{Dies ist die Fähigkeit von Systemen, Informationen automatisch auszutauschen und genau zu interpretieren. Semantische Interoperabilität ist gegeben, wenn die Struktur und Kodierung der Daten in allen beteiligten Systemen einheitlich ist.}\cite{WasIstInteroperabilitaet}
	\item \textbf{Bereichsübergreifende oder organisationsübergreifende Interoperabilität:} \enquote{Dies bezieht sich auf die Standardisierung von Praktiken, Richtlinien, Grundlagen und Anforderungen von unterschiedlichen Systemen. Diese Art von Interoperabilität bezieht sich nicht auf die Mechanismen des Datenaustauschs, sondern nur auf die nichttechnischen Aspekte einer interoperablen Organisation.}\cite{WasIstInteroperabilitaet}
\end{itemize}

Der Fokus dieser Arbeit liegt auf der technischen und syntaktischen Interoperabilität, da geklärt werden soll, in welcher Form bestimmte Informationen zu einer E-Mail gespeichert und an andere Clients übermittelt werden können.

\subsection{AT: Snooze}

\enquote{Das Wort snooze kommt aus der englischen Sprache. Übersetzt bedeutet es, \enquote{ein Nickerchen machen} oder \enquote{dösen}. Snooze finden wir heute vor allem in Verbindung mit dem Wecker oder Smartphone. Damit wird eine spezielle Funktion bezeichnet. Im Snooze-Modus wird das Wecksignal in der Regel für 9 Minuten unterbrochen. Diese Unterbrechung lässt sich beliebig oft wiederholen. Der Snooze-Modus wird auch als Schlummertaste bzw. \enquote{zzz} gekennzeichnet.}\cite{martinSnoozeFunktionVom2021}

Im Kontext von E-Mails hat Snooze eine ähnliche Bedeutung. E-Mails, welche im Moment nicht relevant sind, werden aus dem Sichtfeld entfernt und erscheinen nach einer bestimmten Zeit wieder. Dann kann entschieden werden, ob es jetzt Zeit ist die E-Mail zu bearbeiten oder ob man noch einmal Snooze drückt, wie beim Wecker am Morgen. \cite{SnoozeEmailSeptember2023} \cite{HowUseEmail}

\subsection{AT: Open Standards und RFCs}

Es gibt keine offizielle Defintion für Open Standards (Offener Standard). Die FSFE\footnote{Free Software Foundation Europe (FSFE): \url{https://fsfe.org/}} bietet eine an dem Europäischen Rahmenprogramm zur Interoperabilität (EIF) der Europäischen Komission orientierte Definition.\cite{DefinitionOffeneStandards} Demnach ist ein Offener Standard ein Format oder Protokoll, das

\begin{enumerate}
	\item \enquote{von der Öffentlichkeit vollinhaltlich geprüft und verwendet werden kann;}
	\item \enquote{ohne jegliche Komponenten oder Erweiterungen ist, die von Formaten oder Protokollen abhängen, die selbst nicht der Definition eines Offenen Standards entsprechen;}
	\item \enquote{frei von rechtlichen Klauseln oder technischen Einschränkungen ist, die seine Verwendung von jeglicher Seite oder mit jeglichem Geschäftsmodell behindern;}
	\item \enquote{unabhängig von einem einzelnen Anbieter koordiniert und weiterentwickelt wird, in einem Prozess, der einer gleichberechtigten Teilnahme von Wettbewerbern und Dritten offen steht;}
	\item \enquote{in verschiedenen vollständigen Implementierungen von verschiedenen Anbietern oder als vollständige Implementierung gleichermaßen für alle Beteiligten verfügbar ist.} \cite{DefinitionOffeneStandards}
\end{enumerate}


\enquote{Ein Offener Standard ist zunächst ein technischer Standard, der in Freier und Offener Software eingesetzt wird. Es handelt sich dabei um eine Einigung auf eine gemeinsame Norm, die es ermöglicht, Informationen frei und ohne Veränderungen zu speichern (Format) oder zu übertragen (Protokoll). Das bedeutet, dass andere Menschen auf die Technik oder Inhalte Dritter aufbauen oder sie in anderen Kontexten weiterentwickeln können. Im Gegensatz dazu stünde ein \enquote{geschlossener} Standard, also z. B. eine proprietäre Anwendung, an der nur ein bestimmtes Unternehmen die Rechte hat, Veränderungen vorzunehmen oder überhaupt den Code einzusehen. Der Gedanke hinter Offenen Standards ist also der gleiche wie hinter Offener Software und Offenen Daten: Sie sollen öffentlich zugänglich, ihre Verwendung nicht rechtlich oder technisch eingeschränkt sein und die Beteiligung von Dritten ermöglichen.}\cite{OffeneStandardsUeberblick}

Eine Art solch einen Offenen Standard zu definieren ist ein RFC. \enquote{Ein Request for Comments (RFC) ist ein formales Dokument der Internet Engineering Task Force (IETF)\footnote{Internet Engineering Task Force (IETF): \url{https://www.ietf.org/}}, das Spezifikationen und organisatorische Hinweise zu Themen im Zusammenhang mit dem Internet und Computernetzwerken enthält, wie z. B. Routing, Adressierung und Transporttechnologien.}\cite{WhatRequestComments} \\
RFCs werden durch die IETF, das Internet Architecture Board (IAB)\footnote{Internet Architecture Board (IAB) \url{https://www.iab.org/}}, die Internet Research Task Force (IRTF) \footnote{Internet Research Task Force (IRTF) \url{https://irtf.org/}} oder durch unabhänige Einreichende erstellt. In der Regel beginnen RFCs als Internet-Drafts, die von einer Einzelperson oder einer kleinen Gruppe geschrieben werden. Durch die IETF wird der Draft dann durch eine Arbeitsgruppe überarbeitet und verbessert. Solch eine Arbeitsgruppe besteht aus Freiwilligen Personen auf der ganzen Welt und beinhaltet unter anderem Hardwarehersteller, Softwareentwickler und Netzbetreiber. Unabhänige Einreichungen werden dabei seltener durch eine Arbeitsgruppe betrachtet.  \cite{RFCs} \cite{WhatRequestComments} 

Nicht alle Internet-Drafts werden zu einem RFC, aber ein RFC ist trotzdem nicht gleich ein tatsächlicher Internet Standard.\cite{WhatRequestComments}  Basierend auf dem Inhalt und dem Reifegrad eines RFCs wird diesem ein Label zugeordnet. Dabei gibt es die tatsächlich Standard definierenden Labels:

\begin{itemize}
	\item \textbf{Proposed standard:} \enquote{Stabil, gut verstanden und allgemein als nützlich angesehen}\cite{editorRequestCommentsRFC2019}
	\item \textbf{Draft standard:}  \enquote{Stabil genug, um Implementierungen des Standards in Anwendungen und Netzwerktechnologie zu entwickeln}\cite{editorRequestCommentsRFC2019}
	\item \textbf{Internet standard:} \enquote{Technisch ausgereift, weit verbreitet und von großem Nutzen für die Internetgemeinschaft}\cite{editorRequestCommentsRFC2019}
\end{itemize}

Und im weiteren gibt es die beschreibende RFCs, welche die folgenden Label besitzen:

\begin{itemize}
	\item \textbf{Experimental:} \enquote{Forschungsprotokolle, die so dokumentiert sind, dass sie den Forschern als praktische Referenz dienen.}  \cite{WhatRFCWhat}
	\item \textbf{Best Current Practice:} \enquote{Es handelt sich dabei um die aktuellen Veröffentlichungen von RFCs in denen Verfahren und Protokolle beschrieben werden, die sich im praktischen Einsatz bestens bewährt haben. Ohne das Protokoll oder Verfahren zu spezifizieren, beschreiben diese RFC-Dokumente die Möglichkeiten wie das entsprechende Protokoll benutzt oder konfiguriert werden kann um eine Interoperabilität mit anderen Protokollen zu erreichen.} \cite{lipinskiBestCurrentPractice}
	\item \textbf{Informational:} \enquote{Dabei handelt es sich um Protokolle, die von anderen Organisationen entwickelt wurden, z. B. von offiziellen Normungsorganisationen und kommerziellen Netzwerkunternehmen. Diese wurden manchmal als RFCs veröffentlicht, um eine Standardreferenz für die IETF zu schaffen.} \cite{WhatRFCWhat}
	\item \textbf{Historic:} \enquote{Ältere Protokolle, die in der Regel überholt sind oder nicht verwendet werden.} \cite{WhatRFCWhat}
\end{itemize}

Jeder RFC besitzt eine eindeutige Nummer, welche aufsteigend verteilt werden. Sobald ein RFC veröffentlicht ist, kann er nicht mehr bearbeitet werden. Für eine Änderung ist dann ein neues Dokument nötig. \enquote{Daher ersetzen einige RFCs andere. Die verdrängten RFCs werden als deprecated, obsolete oder sogar obsoleted bezeichnet.} \cite{WhatRFCWhat}

Basierend auf diesen RFCs implementieren Software Entwickler, Hardware-Hersteller und Netzbetreiber ihre Lösungen.\cite{RFCs}

\section{AT: E-Mail and IMAP}
\label{sec:EmailAndIMAP}

\subsection{AT: Mailserver}

Ein Mailserver besteht aus einer Vielzahl von Komponenten und Programmen. Diese lassen sich in drei sogenannte Agents unterteilen. Den Mail Transport Agent (MTA), den Mail Delivery Agent (MDA) und den Mail User Agent (MUA). Diese Agents erfüllen verschiedene Aufgaben, welche auf einem oder mehreren Servern ausgeführt werden. 
\cite{mulletManagingIMAP2000} (Vgl. S. 4) \cite{heinleinDovecotPOP3IMAPServer2014} (Vgl. S. 19)
Der MTA realisiert den asynchronen E-Mail Betrieb, indem er E-Mails vom Nutzendenclient versendet oder E-Mails von anderen MTAs empfängt und weiterleitet. Das Simple Mail Transport Protocol (SMTP) ist dabei das Protokoll, über dass die MTAs kommmunizieren.\\
Der MDA ist für die Bearbeitung der E-Mail zuständig, wenn der aktuelle MTA das Ziel der E-Mail ist. Er sorgt dafür, dass die E-Mail an der richtigen Stelle im mailstore (E-Mail Speicher) für den adressierten Nutzenden abgespeichert wird.\\
Da SMTP sich zwar für den Versand von E-Mails, aber nicht für das nutzerseitige empfangen und abfragen eignet, gibt es noch den MUA. Der MUA ist die Schnittstelle zum Nutzenden und stellt Zugang zum mailstore durch ein Zugriffsprotokoll wie POP3 oder IMAP zur verfügung. Dabei ist der MUA sowohl Teil des Clients, den der Nutzende benutzt, als auch serverseitig um die Anfragen durch POP3 oder IMAP zu bearbeiten.\cite{mulletManagingIMAP2000} (Vgl. S. 4) \cite{heinleinDovecotPOP3IMAPServer2014} (Vgl. S. 20)\\
Wenn in dieser Arbeit von \textit{dem Mailserver} die Rede ist, dann ist der serverseitige Teil des MUA gemeint.

\iffalse
\subsection{AT: Was ist eine E-Mail?}

\begin{itemize}
	\item ???Was ist eine E-Mail????
\end{itemize}
\fi


\subsection{AT: IMAP}

Wie bereits erwähnt ist IMAP ein Protokoll um auf den mailstore eines Mailservers zuzugreifen. Es ist ein statusbehaftetes und bestätigendes Protokoll der Anwendungsschicht des OSI-Referenzmodells und nutzt das Transmission Control Protocol (TCP) zur übertragung. Die neuste Version von IMAP ist IMAP 4rev2 und definiert im RFC 9051\footnote{RFC9051 - Internet Message Access Protocol (IMAP) - Version 4rev2: \url{https://datatracker.ietf.org/doc/html/rfc9051}}.\\
Im Gegensatz zum defacto Standardverhalten beim Abruf von E-Mails über POP3 werden die Nachrichten nicht komplett heruntergeladen und dann vom Mailserver gelöscht oder als gelesen markiert. Der Mailclient fungiert beim Zugriff über IMAP als eine Art Fernsteuerung für das auf dem Mailserver existierende Postfach und ermöglicht eine vollständige E-Mail-Verwaltung, einschließlich Erstellung und Speicherung neuer E-Mails auf dem Server. Auch die Modifikation von E-Mail ist möglich. Allerdings ist dazu das Herunterladen und Löschen der alten E-Mail sowie das Hochladen der neuen (modifizierten) E-Mail notwendig.
\cite{mulletManagingIMAP2000} (Vgl. S. 16) \cite{heinleinDovecotPOP3IMAPServer2014} (Vgl. S. 21) \cite{lebeauAnswerIMAPEditing2013} \\
\enquote{Ein IMAP-Server stellt den Speicherplatz zur Verfügung und hält alle E-Mails vorrätig [...]. Auch die serverseitige Suche nach Absendern oder Textböcken ist möglich, darüber hinaus erlaubt IMAP das Markieren von E-Mails, etwa als gelesen, ungelesen oder beantwortet - oder gar mit völlig wahlfreien Schlagwörtern zur eigenen Markierung.} \cite{heinleinDovecotPOP3IMAPServer2014} (Vgl. S. 21, 22)
Mit IMAP ist es möglich von mehreren Clients parallel auf dasselbe Postfach zuzugreifen und dieses zu bearbeiten, da der Datenbestand auf dem zentralen Server vorliegt und der Client die benötigten Daten abfragt. \cite{mulletManagingIMAP2000} (Vgl. S. 16) \cite{heinleinDovecotPOP3IMAPServer2014} (Vgl. S. 39)
IMAP bietet außerdem die Möglichkeit die E-Mails in sogenannten Mailboxes bzw. Ordnern zu organisieren. \cite{mulletManagingIMAP2000} (Vgl. S. 17)

IMAP bietet sogenannte Flags, welche den Status einer Mailbox oder E-Mail beschreiben. Wenn über den \texttt{LIST} Command die Mailboxen abgefragt werden, kann beispielsweise anhand des \texttt{\textbackslash{Unmarked}} Flags ermittelt werden, ob eine Mailbox seit dem letzen Zugriff neue E-Mails empfangen wurden. Wenn der Flag gesetzt ist bedeutet dass, es befinden sich neue E-Mails in der Mailbox.\cite{heinleinDovecotPOP3IMAPServer2014} (Vgl. S. 46) Auch die einzelnen E-Mails können geflaggt sein. Dazu stellt IMAP sogennante System Flags bereit: \texttt{\textbackslash{Seen}}, \texttt{\textbackslash{Answered}}, \texttt{\textbackslash{Flagged}}, \texttt{\textbackslash{Deleted}}, \texttt{\textbackslash{Draft}}, \texttt{\textbackslash{Recent}}. Es gibt aber auch Keywords, welche von der Serverimplementierung abhängen. Keywords beginnen nicht mit einem \texttt{\textbackslash}. \enquote{Abgesehen von diesem Detail, werden selbstdefinierte und Systemflags auf gleiche Weise angesprochen und gesetzt.} \cite{heinleinDovecotPOP3IMAPServer2014} (Vgl. S. 146?????) Manche Keywords sind bereits durch den IMAP Standard definiert und sollten von den Mailservern unterstützt werden: \texttt{\$Forwarded}, \texttt{\$MDNSent}, \texttt{\$Junk}, \texttt{\$NotJunk}, \texttt{\$Phishing}. Darüber hinaus können eigene Keywords durch den Client gesetzt werden, wenn dies durch den Server erlaubt ist.\\
Bei Auswahl einer Mailbox durch den Client, was vor jedem Zugriff auf den Inhalt einer Mailbox notwendig ist, sendet der Server unter anderem eine Antwort mit dem Stichwort \texttt{FLAGS}, welche die in diesem Ordner zulässigen Flags/Keyword für E-Mails listet. Die Antwort \texttt{PERMANENTFLAGS} listet die durch den Client anwendbaren Flags/Keywords. Wenn diese Antwort \texttt{\textbackslash{*}} enthält, dann ist es dem Client erlaubt eigene Keywords zu setzen.\cite{melnikovInternetMessageAccess2021}

Eine weitere Funktionalität von IMAP, die in dieser Arbeit wichtig wird, sind die Erweiterungen. Mittlerweile gibt es eine Unzahl existierender Erweiterungen für IMAP. \enquote{Diese Vielfalt verwundert nicht, hat das IMAP-Protokoll mit seinem Kommando \texttt{CAPABILITY} selbst den Grundstein dafür gelegt, dass Server flexibel optionale Erweiterungen anbieten können, die sich die Erfinder von IMAP nie hätte träumen lassen.} (Vgl. S. 348) \enquote{Drauf antwortet der Server mit einer Präsentaion seiner Fähigkeiten, den Capabilities. Nicht jeder Server muss alle IMAP-Features unterstützen: Die über das Kernprotokoll hinausgehenden IMAP-Erweiterungen, die IMAP-Extenstions, sind stets optional.} (Vgl. S. 45) \cite{heinleinDovecotPOP3IMAPServer2014} \hl{Es gibt aber mehr oder weniger verbreitete Erweiterungen...}

\begin{itemize}
	\item Modifikation von Emails visualisieren
\end{itemize}

\subsection{AT: Nextcloud Mail App}

Nextcloud\footnote{Nextcloud: \url{https://nextcloud.com/}} ist eine Business Suite vergleichbar mit Google Workspace oder Microsoft 365 mit dem großen Unterschied, dass Nextcloud als Open Source Projekt komplett frei zugänglich ist. Es kann für private Zwecke auf dem Heimrechner oder auf einem Cloud-Server installiert werden. Aber auch Unternehmen, Organisationen oder Einrichtungen können Nextcloud für ihre Zwecke selbst hosten. Unter anderem dadurch ist Nextcloud DSGVO konform und gerade für öffentliche Stellen oder Unternehmen mit sensiblen Daten interessant. Nextcloud wurde ursprünglich als Fork von OwnCloud entwickelt und bietet eine breite Palette von Funktionen, darunter Dateisynchronisation, Kalender, Kontakte, Aufgabenmanagement und vieles mehr. Die Plattform ist darauf ausgelegt, Datenschutz und Sicherheit zu gewährleisten, indem sie Benutzenden die Kontrolle über ihre Daten gibt. \cite{onlineOwncloudVsNextcloud2019}

Nextcloud als Kernsoftare bietet eine Vielzahl an Erweiterungen, welche durch sogenannte Apps zur verfügung gestellt und einfach in der Software installiert und aktiviert werden können. Dazu zählen auch die Groupware Apps. \enquote{Nextcloud Groupware integriert Kalender, Kontakte, Mail und andere Produktivitätsfunktionen, und hilft Teams dadurch ihre Arbeit schneller, einfacher und zu ihren eigenen Spielregeln zu erledigen.} \cite{Groupware}

Die Nextcloud Mail App ermöglicht den Benutzenden, E-Mails direkt in ihrer Nextcloud-Instanz zu lesen, zu senden und zu empfangen. Dabei fungiert die App als ein IMAP E-Mail Client, welcher mehrere E-Mailkonten verschiednerer Anbieter (welche Zugriff über IMAP ermöglichen) in einer einzigen Oberfläche zusammenführen und verwalten kann. Die Nextcloud hat dabei keinen eigenen Mailserver sondern ist nur als Client nutzbar. Weitere Funktionen, welche die Nextcloud Mail App mitbringt, ist das Filtern, Sortieren, und Markieren von Nachrichten. Aber auch eine Integration in andere Nextcloud Apps ist vorhanden. So können Nutzende ihre Termine und Veranstaltungen aus der Kalender App im Zusammenhang mit ihren E-Mails direkt in der Mail App verwalten oder Aufgaben erstellen, welche in der Nextcloud Tasks App angezeigt werden. Unter anderem wird auch Ende-zu-Ende-Verschlüsselung mit OpenPGP und S/MIME sowie das verwalten geteilter Postfächer unterstützt.\cite{Groupware}\cite{UsingMailAppa}

\chapter{AT: Problemstellung von E-Mail}
\label{sec:ProblemstellungInMail}

In diesem Kapitel wird genau erläutert, warum eine Snooze Funktion notwendig ist und warum dafür eine Erweiterung des IMAP Protokolls nötig ist.

\section{AT: Mailmanagement}
\label{sec:mailmanagement}


Die E-Mail Kommunikation ist Teil unseres alltäglichen Lebens geworden. Hauptaufgabe ist die Kommunikation zwischen zwei oder mehr Personen. Archivierung von Informationen, Aufgabenmanagement, Planung von Terminen oder Speicherung von Namen und Adressen sind nur einige Beispiele für Funktionen, die E-Mails bzw. das E-Mail Postfach neben der reinen Kommunikation noch erfüllt. \cite{dabbishEmailOverloadWork2006} \cite{whittakerEmailOverloadExploring1996} Gerade das Aufgabenmanagement wird gerne im E-Mail Postfach erledigt. Der E-Mail-Posteingang wird regelmäßig auf eingehende Mitteilungen überprüft und lenkt damit die Aufmerksamkeit auch auf E-Mails, welche sich noch im Posteingang befinden. Somit wird man immer wieder an seine noch zu erledigende Aufgaben erinnert. Wenn aber an einem Tag zu viele E-Mail eintreffen oder man einen Tag keine Möglichkeit hat, seine E-Mails abzurufen kann diese Stratgie zu Überforderung und Stress führen, da es zu viel wird und man keinen Überblick mehr hat. Generell wurde herausgefunden, dass ein erhötes E-Mail Aufkommen zu eines stärkeren Gefühl der Überlastung führt. \cite{barleyEmailSourceSymbol2011} \cite{dabbishEmailOverloadWork2006} Der Ansatz das E-Mail Postfach häufig abzurufen und E-Mails schnell zu bearbeiten führt zu vielen Aufgabenwechseln und Aufgabenunterbrechungen. Es gibt Hinweise, dass dieses Verhalten negativ auf das Wohlbefinden einwirkt. \cite{kushlevCheckingEmailLess2015} Es gibt aber auch Hinweise, dass man der Überlastung entgegen wirken kann \enquote{entweder durch den Einsatz von Software, die die Nutzung von E-Mails erleichtert, oder durch die Anwendung effektiver Taktiken zur Nutzung von E-Mails als Kommunikationsmittel.} \cite{dabbishEmailOverloadWork2006}
Eine Strategie ist das \enquote{One-Touch-Modell}: \enquote{Alle E-Mails werden gelesen und dann abgelegt oder gelöscht, so dass der Posteingang leer bleibt, außer für neue E-Mails.} \cite{jerejianContributionEmailVolume2013} Informative E-Mails werden gelöscht oder archiviert und E-Mails, welche eine Antwort erfordern, werden erst beantwortet und danach archiviert oder gelöscht. \cite{whittakerEmailOverloadExploring1996} Es stellte sich aber heraus, dass es E-Mails gibt, die nicht mit dieser einfachen Herangehensweie bearbeitet werden können. Beispielsweise muss man für eine Antwort ersteinmal eine Rechearche durchführen oder man weiß nicht, ob eine Informative E-Mail relevant für einen ist. Dies führt dazu, dass man E-Mail wieder im Posteingang liegen lässt und somit zu einem späteren Zeitpunkt nocheinmal entscheiden kann, was zu tun ist.\cite{jerejianContributionEmailVolume2013} \cite{whittakerEmailOverloadExploring1996} \cite{szostekDealingMyEmails2011}\\
Eine Strategie, die sich dieses Problems bewusst ist, ist die Methode \enquote{Inbox Zero}. Dabei wird auch angestrebt in der Inbox nur ungelesene E-Mails zu haben. Es stehen aber mehr Aktionen zur verfügung diese zu bearbeiten. Ziel ist es, diese Aktionen für sich selber zu definieren, sodass man für jede E-Mail, die in der Inbox landet schnell eine Aktion ausführen kann. Das kann z.B. Antworten, Löschen, Archivieren oder Warten sein. Für die einzelnen Aktionen wird eine Mailbox angelegt, mit der sich dann, zu bestimmten Zeiten, beschäftigt wird. \cite{googletechtalksInboxZero2007} In irgendeiner Weise wird es eine Aktion geben, welche für E-Mails gedacht ist, die nicht direkt bearbeitet werden können, weil z.B. Informationen fehlen. Das Verschieben in eine Mailbox und das regelmäßige überprüfen dieser ist sicherlich eine bessere Methode, als die E-Mail in der Inbox zu lassen. Doch was wäre, wenn es eine Automatisierung gibt, die eine E-Mail, die unter die beschriebene Aktion fällt aus dem Sichtfeld entfernt und nach einer definierten Zeit wieder in der Inbox anzeigt? Genau das ist die Snooze Funktion. Mit dieser Möglichkeit lässt sich die Strategie der Inbox Zero noch einfacher umsetzen, da die Inbox alle E-Mail enthält, die auf eine Aktion warten.

\iffalse

\begin{itemize}
	\item Wie lassen sich Konzepte von Inbox Zero dder GTD im E-Mil Management umsetzen?
	\begin{itemize}
		\item Nochmal die Key Methodik von Inbox Zero ermittel und beschrieben
		\item Gibt es dafür schon Mechanismen die das möglich machen (Verwalten in Mailboxen, verschieben, Taggen)
		\item Hinführen, dass eine Snooze Funktion notwendig ist, da effizienter und automatisierte Schritte abgearbeitet werden
	\end{itemize}
\end{itemize}




\begin{itemize}
	\item Forscher haben festgestellt, dass die E-Mail neben der reinen Kommunikation noch viele andere Funktionen erfüllt, vor allem die Archivierung von Informationen und das Aufgabenmanagement . Diese Funktionen der E-Mail sind natürlich mit verschiedenen Arten von Verhaltensweisen im Umgang mit Nachrichten verbunden, die das Gefühl der E-Mail-Überlastung verstärken oder verringern können. \cite{dabbishEmailOverloadWork2006}
	\item E-Mail [...] für mehrere Zwecke verwendet wird: Zustellung und Archivierung von Dokumenten, Delegierung von Arbeitsaufgaben und Aufgabenverfolgung. Sie wird auch für die Speicherung von Namen und Adressen, für das Versenden von Erinnerungen, für Hilfeersuchen, für die Planung von Terminen und für die Bearbeitung von Anfragen an den technischen Support verwendet. \cite{whittakerEmailOverloadExploring1996}
	\item dass die Mitarbeiter E-Mails als Erinnerungen für Dinge, die sie erledigen mussten, und für das Aufgabenmanagement im Allgemeinen verwendeten. Da der E-Mail-Posteingang häufig auf neue eingehende Mitteilungen überprüft wurde, war er ein besonders nützlicher Ort, um Nachrichten zu hinterlassen, die erledigt werden mussten. Ein höheres Aufkommen an eingehenden E-Mails bedeutete jedoch, dass diese Strategie der E-Mail-Bearbeitung insofern nach hinten losging, als Nachrichten schnell aus dem E-Mail-Horizont verschwanden. \cite{dabbishEmailOverloadWork2006}
	
	\item "E-Mail-Überlastung" [...], verwenden wir den Begriff wörtlich, um die Wahrnehmung der E-Mail-Nutzer zu bezeichnen, dass ihre eigene E-Mail-Nutzung außer Kontrolle geraten ist, weil sie mehr E-Mails erhalten und versenden, als sie bewältigen, finden oder effektiv verarbeiten können. \cite{dabbishEmailOverloadWork2006}
	\item Wenn E-Mails maximal 3x am Tag gecheckt werden reduziert das Stress Level und verbessert das Wohlempfinden \cite{kushlevCheckingEmailLess2015}
	\item Wir fanden heraus, dass ein höheres E-Mail-Volumen mit einem stärkeren Gefühl der E-Mail-Überlastung verbunden war, aber diese Beziehung wurde durch bestimmte E-Mail-Management-Strategien abgemildert. \cite{dabbishEmailOverloadWork2006}
	\item  Schließlich deuten unsere Ergebnisse darauf hin, dass sich die Koordination am Arbeitsplatz verbessern würde, wenn die Arbeitnehmer die E-Mail-Überlastung in den Griff bekämen - entweder durch den Einsatz von Software, die die Nutzung von E-Mails erleichtert, oder durch die Anwendung effektiver Taktiken zur Nutzung von E-Mails als Kommunikationsmittel. \cite{dabbishEmailOverloadWork2006}
	
	\item Ein gängiger Ansatz zur Bewältigung des Posteingangs ist das häufige Abrufen von E-Mails und die schnelle Beantwortung eingehender Nachrichten, was zu häufigen Aufgabenwechseln und Aufgabenunterbrechungen führt. Einige Forschungsergebnisse deuten jedoch darauf hin, dass das Unterbrechen und Wechseln zwischen Aufgaben dem Wohlbefinden abträglich sein kann. \cite{kushlevCheckingEmailLess2015}
	
	
	\item Es wurde ein "One-Touch-Modell" angenommen: Alle E-Mails werden gelesen und dann abgelegt oder gelöscht, so dass der Posteingang leer bleibt, außer für neue E-Mails. Dieses Modell konnte jedoch nicht bestätigt werden, da die Teilnehmer dazu neigten, gelesene Nachrichten im Posteingang zu belassen, um sie zu einem späteren Zeitpunkt abzulegen, und ihr Ablageverhalten reichte von denen, die häufig ablegten, über diejenigen, die sporadisch ablegten, bis hin zu denjenigen, die überhaupt nicht ablegten. Die Forscher vermuteten, dass das Modell aus zwei Gründen ungestützt blieb: Es gab eine große Menge an empfangenen E-Mails und die Teilnehmer nutzten E-Mails als Aufgabenerinnerung. \cite{jerejianContributionEmailVolume2013}
	\item Ein einfaches One-Touch-Modell für E-Mails könnte davon ausgehen, dass eingehende Nachrichten, die informativ sind, d. h. keine Antwort erfordern, gelesen und dann je nach Relevanz entweder gelöscht oder abgelegt werden. Eingehende Nachrichten, die Teil einer Korrespondenz sind (d. h. eine Antwort erfordern), werden beantwortet und dann entweder gelöscht oder abgelegt. Nach dem One-Touch-Modell können sich die Informationen also in zwei möglichen Zuständen befinden: ungelesen und abgelegt. Der Posteingang des Benutzers sollte zu jedem Zeitpunkt nur aus einer kleinen Anzahl ungelesener eingehender Nachrichten bestehen, während der Rest des Postfachs aus abgelegten Elementen besteht. \cite{whittakerEmailOverloadExploring1996}
	
	\item Es ist schwer für manche E-Mail tz entscheiden, was damit zu tun ist und ob sie später evt nocheinmal relevant werden \cite{whittakerEmailOverloadExploring1996} \cite{szostekDealingMyEmails2011}
	
	
	\begin{itemize}
		\item Das führt dazu, dass die INBOX mit diesem Mails überfüllt und wir die wichtigen E-Mails suchen müssen
		\item Snooze könnte hier abhilfe schaffen und dafür sorgen, dass diese E-Mails aus dem Blick verschwinden und später, wenn man evt weiß, was man mit dieser Nachricht machen will neu entscheiden kann.
	\end{itemize}
	\item Whittaker und Sidner konnten qualitativ nachweisen, dass Personen, die ihre E-Mails häufig ablegen, das Gefühl haben, die Kontrolle über ihre E-Mails zu haben. Die Forscher stellen jedoch mehrere Probleme bei der häufigen Ablage fest, darunter den kognitiven Aufwand für die Erstellung der Ordner, "fehlgeschlagene Ordner", die zwar erstellt, aber nicht verwendet werden, und den Verlust wichtiger Erinnerungen, die in den Ordnern verborgen sind. \cite{dabbishEmailOverloadWork2006}
	
	
	\item Wie in der Literatur vorhergesagt, haben wir festgestellt, dass Je mehr Zeit die Menschen mit der Bearbeitung von E-Mails verbrachten, desto größer war ihr Gefühl der Überlastung, und je mehr E-Mails sie bearbeiteten, desto größer war ihre wahrgenommene Fähigkeit zur Bewältigung. \cite{barleyEmailSourceSymbol2011}
\end{itemize}

\fi

\section{AT: Warum IMAP}
\label{sec:WhyIMAP}

Um eine Snooze Funktion nutzen zu können, muss sie durch den E-Mail Client, den man benutzt, implementiert werden. \\
Es gibt propräritäre E-Mail Clients, wie z.B. Gmail, bei denen nicht genau gesagt werden kann, wie sie auf die Daten des Google Mailservers zugreifen. Neben dieser eigenen propräritären E-Mail Postfächer,beiten die meisten E-Mail Clients zumindest die Möglichkeit E-Mail Postfächer über IMAP hinzuzufügen. Dabei wird das Standardtisierte und offene Protokoll IMAP genutzt um die E-Mails auf dem Mailserver zu verwalten. IMAP ist die empfohlene Methode um von mehreren verschiedenen Geräten oder Programmen auf ein Postfach zuzugreifen. \cite{WasSindIMAP}
Wenn eine Snooze Funktion Clientübergreifend funktionieren soll, also eine gesnoozte E-Mail in Clients A auch in Clients B gesnoozt ist, ist es notwendig eine interoperble Lösung dafür zu finden. IMAP als Protokoll, mit dem man auf die allermeisten Mailserver zugreifen kann, ist diesbezüglich das Mittel der Wahl um eine interoperable Lösung zu implementieren.

Im nächsten Kapitel werden die existierenden Lösungen einer Snooze Funktion ermittlt und geschaut, wie diese sich verhalten und ob es bereits Ansätze zur Interoperabilität gibt.

\begin{itemize}
	\item \hl{Bisschen klarer formulieren}
\end{itemize}


\iffalse



Internet messaging is defined by a series of specifications that are free and open for all. Consequently, an Internet messaging system can be built using a variety of products from several vendors, with assuring that each product will interoperate with all the other products. This is especially important because the open standards defining the Internet itself make for a highly complex environment in which each component of a messaging model must know what to expect of the others. Communication standardization is the soul of the Internet. (S. 10)

Before too long, however, the problem of how to best implement email was divided and conquered. As we?ve seen, a special-purpose protocol (SMTP) was developed exclusively for transport of the messages from one place to another.
Other protocols were developed for accessing the mail once it arrived at the destination mailstore (IMAP and POP). Standards were developed for the format of messages themselves and for encapsulating the payload of those messages (MIME). With the standards in hand, it was an entirely manageable task for the various parts that make up Internet email to interoperate, because the means of doing so was a widely discussed and published set of industry standards. System administrators no longer needed to worry about whether or not the sendmail, QMail, and Postfix MTAs would talk to each other. Nor did they need to concern themselves with whether any IMAP-compliant client would be able to retrieve mail from their UW IMAP, Cyrus, or proprietary IMAP server. (S. 12)


BUCH \cite{mulletManagingIMAP2000}

\fi


\chapter{AT: Exsitierende Implementierungen}
\label{sec:ExistierendeImpl}

In diesem Kapitel werden verschiedenste E-Mail Clients betrachtet und beschrieben ob und in welcher Form sie eine Snooze Funktionalität implementieren. Die Auswahl der betrachteten Clients basiert auf drei Schwerpunkten:\\
1. Popularität\\
Um den Status Quo analysieren zu können ist es wichtig verschiedene Clients zu betrachten. Allerdings gibt es nur eine Hand voll E-Mail Clients, welche den Großteil des Marktes bei der Nutzung ausmachen. Auch wenn die Zahlen nicht ganz eindeutig sind, ist klar, dass die meisten Menschen die Clients von Gmail, Apple Mail und Outlook nutzen. Weitere Clients mit weniger Nutzenden, aber immernoch relevanten Zahlen sind Yahoo Mail, Web.de, GMX, Thunderbird und Samsung Mail. \cite{MostPopularEmail2022}  \cite{EmailClientMarketa} \cite{EMailNutzung2021Mailjet} \\
2. Open Source\\
Der zweite Schwerpunkt sind Open Source Clients. \\
3. Snooze Funktionalität\\
Der letzte Schwerpunkt sind E-Mail Clients, welche die Snooze Funktionalität implementieren. Es gibt viele verschiedene Implementierungen für die Snooze Funktionalität. Um bewerten zu können, welche Lösungen gut und welche eher unbrauchbar sind, ist es gut einen Gesamtüberlick zu bekommen. Dabei können gerade E-Mail Clients mit wenig Nutzenden eine sehr kluge Implementierung haben.

Die verschiedenen Clients werden in vier Gruppen unterteilt.\\
\textbf{Keine Implementierung:} Clients, welche keine Snooze Funktionalität haben.\\
\textbf{Lokale Implementierung:} Clients, welche eine Snooze Funktionalität haben, welche aber nicht für andere Clients benutzbar ist.\\
\textbf{\hl{Environment Implementierung}:} Client, welche die Snooze Funktionalität besitzen und diese Clientübergreifend zumindest in der eigenen Umgebung funktionieren.\\
\textbf{Interoperable Implementierungen:} Clients, welche die Snooze Funktionalität so implementiert haben, dass sie theoretisch von anderen Clients benutzt werden kann.


\begin{itemize}
	\item Kein IMAP
	\item Welche Annahmen wurden über propräritäre Software getroffen??
	\item wie wurde die snooze funktion getestet? Wurde traffic angeschaut? welcher mailserver (dovecot) wurde benutzt, welche extentions sind dort aktiviert? Wurde der metadaten ext gar nicht ausprobiert?!?
	\item Add Yahoo, Samsung und Windows Live Mail
\end{itemize}

\section{AT: Keine Implementierung}
\label{sec:NoImpl}

Bei der Analyse von bestehenden Implementierungen einer Snooze Funktionalität haben sich einige E-Mail Clients herausgestellt, welche diese Funktionalität gar nicht implementiert haben. Darunter fallen der Android E-Mail Client K-9 \footnote{K-9: \url{https://k9mail.app/}}, OpenExchangeMail \footnote{Open-Xchange Email: \url{https://www.open-xchange.com/products/ox-cloud}}, Yahoo Mail \footnote{Yahoo Mail: \url{https://overview.mail.yahoo.com/}}, SnappyMail \footnote{SnappyMail: \url{https://snappymail.eu/}}, Rainloop \footnote{Rainloop: \url{https://www.rainloop.net/}}, Tutanota \footnote{Tutanota: \url{https://tutanota.com/}}, Posteo \footnote{Posteo: \url{https://posteo.de/de}}, ProtonMail \footnote{ProtonMail: \url{https://proton.me/mail}}, Cypht \footnote{Cypht: \url{https://cypht.org/}} oder Evolution \footnote{Evolution: \url{https://wiki.gnome.org/Apps/Evolution}}.


\section{AT: Lokale Implementierung}
\label{sec:LocalImpl}

Es gibt aber auch E-Mail Clients, welche die Snooze Funktionalität implementiert haben aber diese nur in dem jeweiligen Client nutzbar ist. Die folgenden Clients fallen darunter:

\subsection{Mailbird}

Mailbird \footnote{Mailbird: \url{https://www.getmailbird.com/de/}} ist ein Desktop E-Mail Client für Windows und Mac. Die Snooze Funktion ist nur in der Inbox verfügbar und verschiebt die E-Mail in in den Reiter \enquote{Zurückgestellt} bzw. \enquote{Snoozed}. Über IMAP wird die E-Mail in eine Mailbox \enquote{Snoozed} verschoben. 'Wenn die Zeit abläuft, wird die E-Mail wieder ganz oben in Ihrem Posteingang angezeigt.' \cite{NtzenSnoozeFnktionIhrem2022} Über IMAP ist dies nicht der Fall. Zusätzlich wird die E-Mail noch als ungelesen markiert.

\subsection{FairEmail} 
FairEmail\footnote{FairEmail: \url{https://email.faircode.eu/}} ist ein E-Mail Client für Android. Beim snoozen einer Mail wird diese für den Nutzenden ausgeblendet. Für andere E-Mail Clients ist dieses Ausblenden nicht sichtbar, da es lokal auf dem Gerät passiert.\cite{FairEmailFAQMd} \\
Nachdem der definierte \hl{unsnooze} Zeitpunkt erreicht ist wird die E-Mail wieder sichtbar und als ungelesen markiert. Außerdem wird ein Uhr-Symbol angezeigt, welches darauf verweist, dass die E-Mail \hl{gesnoozed} wurde.

\begin{itemize}
	\item 'snoozing is done locally on the device by hiding the message while it is snoozing. Unfortunately, it is not possible to hide messages on the email server too. Deleting messages from the server and restoring them later could result in losing messages when the device breaks.' \cite{FairEmailFAQMd}
\end{itemize}

\subsection{Thunderbird}
Thunderbird\footnote{Thunderbird: \url{https://www.thunderbird.net/de/}} hat keine Snooze Funktionalität. Allerdings gibt es ein Add-On mailmindr\footnote{mailmindr: \url{https://mailmindr.net/de/}}, welches lokales \hl{snoozen} in Thunderbird ermöglicht. Dabei werden die E-Mails in einen, vom Nutzenden definierten Ordner, verschoben. Beim \hl{unsnoozen} wird neben dem zurückschieben der E-Mail noch eine Funktionalität ausgeführt, die vom Nutzenden definiert wird. Beispielsweise das Makieren als ungelesen der E-Mail.\\
Es gibt in Thunderbird auch die Möglichkeit E-Mails zu taggen. Dazu gibt es fünf vordefinierte Tags, wobei der fünfte Tag \enquote{Later} heißt. Intern wird der Tag als \enquote{\$label5} geführt. Diese fünf Label werden auch von anderen E-Mail Clients wie z.B. der Nextcloud Mail App verwendet. In Thunderbird lässt sich nach diesem Tag filtern, was auch eine Möglichkeit bietet E-Mails zu verstecken und zu einem anderen Zeitpunkt erneut anzuschauen.

\begin{itemize}
	\item Permaflags erklären oder oben
\end{itemize}

\section{AT: Environment Implementierung}
\label{sec:EnvironmentImpl}

Clients, welche es auf verschiedenen Plattformen gibt, z.B. als App und Web Client haben meistens eine Syncronisation der Metadaten im Hintergrund über einen Nutzendenaccount. Dabei ist die Snooze Funktionalität in diesen Clienets meist interoperabel aber nicht über diese Umgebung hinaus. Die folgenden Clients bzw. Anbieter fallen darunter:

\subsection{GMail}
Gmail\footnote{Gmail: \url{https://www.google.com/intl/de/gmail/about/}} hat die Snooze-Funktionalität am 25.Juli 2018 eingeführt. \cite{NewGmailNow} Um zu verstehen, wie das \hl{snoozen} funktioniert, muss erst einmal erläutert werden, wie Gmail generell Ordner/Mailboxen umsetzt. Für die Organisation werden sogenannte Label angeboten, welche den E-Mails zugewiesen werden können. \cite{GmailMithilfeLabels} Diese Label sind dann vergleichbar mit Ordnern und können über das Menü einzeln gelistet werden. Über IMAP werden die Labels als Ordner/Mailboxen Zurückgegeben. \cite{IMAPExtensionsGmail} E-Mails, welche beispielsweise das Label \enquote{Wichtig} zugeordnet bekommen, werden über IMAP als E-Mail des Ordners/der Mailbox \enquote{Wichtig} gelisted.\\
Wenn eine E-Mail in Gmail aus dem Posteingang \hl{gesnoozt} wird, wird das Label \enquote{Posteingang} entfernt und die E-Mail wird in Gmail unter dem Reiter \enquote{Zurückgestellt} bzw. \enquote{Snoozed} gelisted. Falls die E-Mail das Label \enquote{Posteingang} nicht mehr besitzt und ein anderes Label hat, wird dieses nicht entfernt. Durch das Entfernen des Labels \enquote{Posteingang} wird die E-Mail über IMAP nicht mehr im Posteingang/Inbox angezeigt. Da Gmail den \hl{gesnoozten} E-Mails aber kein Label extra zuordnet, sind die E-Mails, welche aus dem Posteingang \hl{gesnoozt} werden, über IMAP nicht mehr auffindbar. Lediglich in einem Ordner, welcher alle auf dem Gmail Account existierende E-Mail beinhaltet, werden die \hl{gesnoozten} E-Mails noch angezeigt. \\
Nachdem der definierte \hl{unsnooze} Zeitpunkt erreicht ist wird die Mail mit dem Label \enquote{Posteingang} versehen und wird damit auch für IMAP wieder sichtbar im Posteingang gelistet. Die E-Mail wird nicht als ungelesen markiert aber in Gmail an den Anfang des Posteingangs sortiert.

Gmail gibt damit anderen Clients gar keine Möglichkeit über IMAP zu ermitteln, welche E-Mails gerade \hl{gesnoozt} sind.

\subsection{Exchange/Outlook}
Outlook\footnote{Outlook: \url{https://outlook.live.com/owa/}} ermöglicht es E-Mails aus der Inbox zu \hl{snoozen}. Die E-Mails werden dann in der Outlook App unter dem Reiter \enquote{Erneut erinnern} und in Outlook Webmail unter \enquote{Erneut erinnern aktiviert} gelistet. Über IMAP werden die E-Mails in einen Ordner \enquote{Erneut erinnern aktiviert} verschoben, wobei sich der Name dieses Ordners je nach Spracheinstellungen ändert. Wenn der \hl{unsnooze} Zeitpunkt erreicht ist, wird die E-Mail zurück in die Inbox verschoben und als ungelesen markiert. In Outlook wird die E-Mail darüber hinaus an den Anfang der Inbox sortiert.

\subsection{Apple Mail}
Apple Mail\footnote{Apple Mail: \url{https://support.apple.com/mail}} hat seit iOS 16 und macOS Ventura (13) eine \enquote{Remind me} Funktion.\cite{HowUseApple2022} In der Inbox befindliche E-Mails \cite{RemindMeOptions} lassen sich dabei mit einer Erinnerung versehen. Die E-Mail wird dabei aber nur mit einem Uhr Symbol dargestellt und nach dem Zeitpunkt des \hl{unsnoozen} an den Anfang der Inbox sortiert. Über IMAP ist die \enquote{Remind me} Funktion gar nicht zu erkennen.

\subsection{Mailspring}
Mailspring\footnote{Mailspring: \url{https://www.getmailspring.com/}} ist ein Desktop E-Mail Client für Linux, Mac und Windows. Die Snooze Funktion ist sowohl in der Basic als auch in der Pro Version verfügbar, wobei die Pro Version unbegrenztes \hl{snoozen} erlaubt.\cite{SnoozeEmailsHandle2021} \\
E-Mails, welche \hl{gesnoozt} werden, verschiebt Mailspring in einen Unterordner \enquote{Snoozed} des Ordners \enquote{Mailspring}. Beim \hl{unsnoozen} wird die E-Mail zurück in die Inbox verschoben. Zusätzlich wird eine neue E-Mail generiert, welche über einen Thread der \hl{ungesnoozten} E-Mail zugeordnet wird. Diese E-Mail ist als ungelesen markiert und hat die aktuelle Zeit als Empfangszeit. Dadurch wird der Thread, und damit auch die \hl{ungesnoozte} E-Mail, am Anfang der Inbox angezeigt, was sogar ermöglicht, dass auch über IMAP die E-Mail wieder an den Anfang der Inbox verschoben wird.

\begin{itemize}
	\item Noch auf Thread Funktionalität eingehen
\end{itemize}

\subsection{Spark}
Spark\footnote{Spark: \url{https://sparkmailapp.com/de}} ist ein E-Mail Client für Windows, Android, Mac und iOS, welcher auch \hl{snoozen} kann.\cite{EMailsFuerSpaeter} Die Snooze Funktionalität verschiebt die E-Mail aus dem jeweiligen Ordner und zeigt sie unter dem Reiter \enquote{Snoozed} an. Über IMAP wird die E-Mail in einen Ordner \enquote{Later} verschoben. Beim \hl{unsnoozen} wird die E-Mail zurück in die Inbox verschoben (egal ob sie aus der Inbox oder einem anderen Ordner heraus \hl{gesnoozed} wurde). Zusätzlich wird die E-Mail als ungelesen markiert und in den Spark Clients an den Anfang der Inbox sortiert. Syncronisiert werden die snooze Informationen über einen Spark Account, welcher automatisch beim einbinden des ersten E-Mail Accounts angelegt wird. Wenn man bei einem anderen Spark Client den primären E-Mail Account hinzufügt, werden die snooze Informationen auch auf dem neuen Client übernommen. \cite{SyncSparkMultipleb}

\subsection{Fastmail}
Fastmail\footnote{Fastmail: \url{https://www.fastmail.com/}} ist ein E-Mail Client für Android, iOS und Web, welcher die Snooze Funktionalität als kostenpfichtiges Feature anbietet. Auch der IMAP Zugriff ist eine kostenpflichtige Funktionalität und lässt sich im Gegensatz zu Snooze Funktionalität nicht mit einem kostenlosen Account testen. Laut Fastmail ist die Snooze Funktionalität auf Fastmail beschränkt und andere Clients, welche z.B. über IMAP auf den Account zugreifen, haben keinen Zugriff auf diese Funktionalität.\cite{SnoozingMail}
Wenn eine E-Mail in Fastmail \hl{gesnoozt} wird, dann wird sie aus dem Ordner in dem sie sich befindet ausgeblendet und unter dem Reiter \enquote{Snoozed} gelistet. Beim \hl{unsnoozen} wird die E-Mail wieder in dem Ursprungsordner angezeigt und an den Anfang des Ordners sortiert. Der gelesen Status wird nicht geändert.

\begin{itemize}
	\item (Behauptung Fastmail benutzt IMAP nutzt draft-ietf-sieve-imap-sieve-09 kombiniert mit draft-ietf-extra-sieve-snooze)
	\item \hl{Hier evt auf JMAP eingehen?}
\end{itemize}

\subsection{Zoho Mail}
Zoho Mail\footnote{Zoho Mail: \url{https://www.zoho.com/de/mail/}} bietet die Snooze Funktionalität. \cite{SnoozeEmailsLater} Aber auch hier ist der IMAP Zugriff ein kostenpflichtiges Feature. \cite{ZohoMailFlexibles} In Zoho Mail wird beim \hl{snoozen} die E-Mail unter dem Reiter \enquote{Snoozed} gelistet und aus dem ehemaligen Ordner entfernt. Beim \hl{unsnoozen} wird die E-Mail in die Inbox verschoben (egal, aus welchem Ordner heraus sie \hl{gesnoozt} wurde) und der ungelesen Status wird nicht geändert. Auch wird die E-Mail nicht an den Anfang der Inbox sortiert.


\section{AT: Interoperable Implementierungen}
\label{sec:InteropImpl}

Im folgenden werden Implementierungen in E-Mail Clients betrachtet, welche einen interoperablen Ansatz verfolgen und somit theoretisch von allen E-Mail Clients benutzt werden können.

\subsection{Roundcube}
Roundcube\footnote{Roundcube: \url{https://roundcube.net/}} ist ein selbstgehosteter Webmailer und kann von sich aus nicht snoozen. Es gibt allerdings ein Plugin roundcube-snooze\footnote{roundcube-snooze: \url{https://github.com/toptensoftware/roundcube-snooze}}, mit dem es möglich ist E-Mails zu \hl{snoozen}. Beim \hl{snoozen} wird dabei der Header der E-Mail bearbeitet. Da E-Mails aber nicht bearbeitbar sind wird die E-Mail dubliziert und der Header wird bearbeitet, bevor die neue E-Mail gespeichert wird. Die alte E-Mail wird gelöscht. Beim bearbeiten wird ein \hl{Header-Tag} \textit{X-Snoozed} hinzugefügt, welcher den Zeitpunkt des Snooze als auch den zukünftigen Zeitpunkt des \hl{Unsnooze} enthält. Außerdem wird der Name der Mailox, aus dem die E-Mail \hl{genoozt} wurde und der aktuelle Status gespeichert.\cite{robinsonSnoozeRoundcube2023} Im folgenden ist der Header-Tag einer Beispiel-E-Mail zu sehen, welche bereits \hl{unsnoozt} ist.

\begin{verbatim}
  X-Snoozed: at Fri, 13 May 2022 10:16:56 +1000;
    until Fri, 13 May 2022 10:17:00 +1000;
    from INBOX;
    woken
\end{verbatim}

Zusätzlich wird die E-Mail in eine Snoozed Mailbox verschoben.\\
Ein Aufwachskript, welches auf dem Webserver des Webmailers installiert wird, schiebt die E-Mail nachdem der \hl{unsnooze} Zeitpunkt erreicht ist zurückn und das Keyword \textit{woken} wird im Header-Tag \textit{X-Snoozed} gesetzt.\cite{robinsonSnoozeRoundcube2023}\\
Dadurch, dass der Header der E-Mail bearbeitet wird, können alle anderen E-Mail Clients diese Information sehen und dementsprechend die Informationen theoretisch darstellen.\\
Die entwickelnde Person macht aber klar, dass es sich um eine sehr experimentelle Implementierung handelt, welche nicht ausgibig getestet wurde und nur auf DoveCot\footnote{DoveCot: \url{https://www.dovecot.org/}} ausgerichtet ist.\cite{robinsonSnoozeRoundcube2023}


\subsection{eM Client}
Der eM Client\footnote{eM Client: \url{https://de.emclient.com/}} ist ein E-Mail Client für Windows und Mac. Mobile Clients für Android und iOS sind aber bereits in der Beta verfügbar. \cite{EMClientBeta} \\
Die Snooze Funktionalität ist ein kostenpflichtiges Feature in der Pro Version. \cite{Snooze} Allerdings lässt sich in der Android App auch ohne Pro \hl{snoozen}. Beim \hl{snoozen} wird der E-Mail ein \hl{Label} zugeweisen,\hl{(Permaflag, ref auf oben)} welches mit \enquote{\$SnoozedUntil\_} beginnt und von dem \hl{Unsnooze} Zeitpunkt als Unix Timestamp gefolgt wird. Daraus entsteht beispielsweise das folgende Label: \enquote{\$SnoozedUntil\_162597600}\\
In den eM Clients werden die E-Mails mit solch einem Label, bei dem der Timestamp in der Zukunft liegt, in der Inbox ausgeblendet. Die E-Mail kann dann unter dem Reiter \enquote{Snoozed} gefunden werden. Nach dem \hl{unsnoozen} wird die E-Mail wieder sichtbar.\\
Da das Label durch andere E-Mail Clients abgerufen werden kann, ist es theoretisch möglich, dass auch andere Clients die E-Mail \hl{gesnoozt} darstellen.


\section{AT: Fazit}
\label{sec:FazitExistingSolution}

Wie man sehen kann, gibt es viele verschiedene Implementierungen einer Snooze Funktionalität. Teilweise sehr unterschiedlich aber oft auch mit gleichen Ansätzen. Generell fällt auf, dass oft versucht wird auf lokale Implementierungen zu setzen. Viele Clients legen eine extra Mailbox an um die gesnootzen E-Mails dorthin zu verschieben. Das ist in gewisser Weise eine Möglichkeit für andere Clients zumindest zu erkennen, welche E-Mails gesnoozt sind und welche nicht. Allerdings sind die Namen dieser Mailboxen nicht einheitlich und unterscheiden sich sogar teilweise in der eigenen Umgebung, wie es bei Outlook der Fall ist. Auch das Verhalten der Clients nach dem unsnoozen unterscheidet sich stark. Vom reinen wieder einblenden bis als ungelesen an den Anfang der Mailbox sortieren und mit einem besonderen Symol makieren ist alles dabei.
Nichts destotrotz gibt es auch Lösungsansätze, welche versuchen eine interoperable Implementierung zu nutzen. Auf diese und andere interoperable Ansätze wird im nächsten Kapitel näher eingegangen.

\chapter{AT: Diskussion Lösungsansätze}
\label{sec:DisskussionLoesung}

Das folgende Kapitel widmet sich, nach der Analyse existierender Lösungen im vorherigen Kapitel, dem schaffen/beleuchten/analysieren interoperablen Lösungen für eine Snooze Funktion. Dabei werden Ansätze von den bereits existierenden Implementierugen noch einmal aufgegriffen und neue/andere Ansätze beleuchtet. Das Ziel ist, dass die Ansätze/Lösungen nicht dazu führen, dass andere Clients, welche diesen Ansatz/Lösung nicht implemntiert haben verwirrt werden \hl{FORMULIERUNG} und wie bei Gmail z.B. gesnoozte E-Mails nicht mehr aufzufinden sind. Im besten Fall ist auch für Clients ohne die Implementierung eines Ansatztes erkennbar, dass eine E-Mail gesnoozt ist. \\
Der Fokus liegt auf der Verwendung bereits existierender Funktionalitäten im IMAP Protokoll oder Erweiterungen dieser durch sogenannte Extentions. Aber auch das Ausnutzen der Strucktur einer E-Mail ist ein bevorzugter Ansatz. Grund dafür ist, dass je näher man am Standard bleibt oder auf bereits etablierte Erweiterungen setzt, umso wahrscheinlicher ist am Ende auch, dass die eigene Implementierung eines Ansatzen Verbreitung findet.

\section{AT: Was muss möglich sein}
\label{sec:WasMussMoeglich}

Um die Lösungsansätze bewerten zu können ist es notwendig noch einmal klar zu formulieren, welche Aufgaben eine Snooze Funktion erfüllen muss und welche Funktionen darüber hinaus wünschenswert wären, damit man von einem interoperablen Ansatz eines Snooze Features sprechen kann. Diese Aufgaben sind technischer Natur und beschreiben, was der E-Mail Client für Möglichkeiten haben muss. Es geht hierbei nicht um den genauen Umgang der Clients mit den Informationen und die damit einhergehende Schnittstelle zum Nutzenden. Den Clients sollte selbst überlassen sein, wie die zur verfügung gestellten Möglicheiten genutzt werden, solange sie den technischen Vorgaben für die Speicherung und Übermittlung der Daten des Lösungsansatzes folgen. Ob es eine oder mehrere Auswahlmöglichkeiten gibt, wie lange eine E-Mail gesnoozt wird, darf sich beispielsweise von Client zu Client unterscheiden. \\
Aufgaben, die erfüllt werden müssen sind, dass E-Mails, welche gesnoozt sind, für alle Clients in irgendeiner Weise als diese erkennbar sind. Ebenfalls muss die Information, bis wann eine E-Mail gesnoozt ist, durch den Client ermittelbar sein. Auch muss sichergestellt werden, dass der aufweck Prozess einer E-Mail keine Inkosistez erzeugt, wenn Beispielsweise mehrere Clients gleichzeitig versuchen eine E-Mail aufzuwecken. \\
Für den Fall, dass die E-Mail beim Snoozen in eine andere Mailbox verschoben wird, ist es wünschenswert, wenn der Name der Mailbox, aus der die E-Mail kommt, gespeichert wird. Dadurch kann die E-Mail wieder zurück in diese Mailbox verschoben werden, wenn die E-Mail wieder aufgeweckt wird. Für den Fall, dass diese Information nicht ermittelbar ist kann die E-Mail aber immer in die INBOX verschoben werden, weshalb diese Information nicht zwangsläuftig ermittelbar sein muss. Ebenfalls wünschenswert wäre die Möglichkeit für den Client zu ermitteln, seit wann eine E-Mail wieder aufgewacht ist. Damit könnte sich eine Sortierung der aufgewachten E-Mail an den Anfang der Mailbox realisieren lassen. Ähnlich zu der Information, seit wann eine E-Mail aufgewacht wurde, kann die Information, wann eine E-Mail gesnoozt wurde für die Darstellung durch den Client interessant sein. Aber da die E-Mail sowieso aus dem Blickfeld verschwinden soll, wenn sie gesnoozt ist, ist diese Information für eine Snooze Funktionalität nicht wirklich erforderlich.

\section{AT: Welche Möglichkeiten gibts}
\label{sec:WelcheMoegGibts}

\subsection{AT: Keywords}

Der erste Lösungsansatz, der beleutet wird ist die Verwendung von \hl{Keywords}. Dabei werden die durch IMAP definierten \hl{Permaflags} genutzt. Wie bereits erläutert können diese von den Clients erstellt und den einzelenen E-Mail zugeordnet werden. Es ist zwar möglich, dass der Mailserver das erstellen eigener \hl{Permaflags} nicht gestattet, was aber nur sehr selten der Fall ist.

Angeleht an die Implementierung in Thunderbird, wo es ein \hl{Label} \enquote{Later} gibt, könnte hier ein \hl{Label} \enquote{Snooozed} eingeführt werden. Dieses \hl{Label} würde dann die Aufgabe erfüllen E-Mails zu identifizieren, welche \hl{gesnozt} sind. Es ist auch möglich direkt das \hl{Label} \enquote{Later} von Thunderbird zu adaptieren für diesen Zweck. Da Later im Fall von Thunderbird eine sehr ähnliche Bedeutung hat wie ein Snooze hat und intern als \enquote{\$label5} implementiert ist, könnten dieses \hl{Label} auch \enquote{Snoozed} heißen und somit direkt in mehreren Clients funktionieren. Zu beachten ist hier aber, dass dieses \enquote{Label} nur die Information repräsentiert, welche Mail \hl{gesnoozt} ist, nicht aber für wie lange. Deshlab kann dieser Ansatz höchstens ein Teil einer interoperablen Lösung sein.

Ein anderer Ansatz basierend auf der Verwendung von \hl{Keywords}, ist die Implementierung des eM Clients. Das \hl{Label}, welches dort beim \hl{snoozen} gesetzt wird besteht aus der ersten Hälte \enquote{\$SnoozedUntil\_} und der zweiten Hälte, welche ein UNIX Timestamp ist, z.B. \enquote{162597600}. Dabei würde die erste Hälte die Aufgabe erfüllen, zu identifizeiren, welche E-Mail \hl{gesnoozt} ist und die zweite Hälfte die Zeit definieren, wann die E-Mail \hl{unsnoozt} werden soll. Das Problem dieses Ansatzen liegt im Design des \hl{Labels}. Da der UNIX Timestamp Teil des \hl{Labels} ist, ist jedes \hl{Label} unterschiedlich. Ausgenommen der Fall, dass zwei oder mehr E-Mails gleichzeitig \hl{gesnoozt} gesnoozt werden. Dies fürt dazu, dass bei jedem \hl{snoozen} ein neues \hl{Label} erstellt wird, welches dann durch den Mailserver gespeichert und bei jeder \enquote{SELECT} Anfrage zurückgegeben wird. Zwar definiert der IMAP Standard keine maximale Anzahl an \hl{Labeln}, welche durch die Clients erstellt werden dürfen, allerdings kann der Mailserver das Erstellen neuer \hl{Label} unterbinden, falls die Anzahl eine interne grenze überschreitet, indem die \hl{PERMAFLAG} Antwort kein \textbackslash* enthält. \cite{melnikovInternetMessageAccess2021} Außerdem nutzen manche Clients wie z.B. FairEmail die \hl{PERMAFLAG} Antwort um eine Liste an möglichen \hl{Labels} zu generieren, die einer E-Mail zugewiesen werden können. Ein Heruasfiltern dieser \hl{Label} ist in diesem Fall wahrscheinlich ein annehmbarer Aufwand, den die Clients betreiben müssten. Aber auch generell entsteht durch diesen Ansatz eine sich schnell aufsummierende Masse an Daten, sowohl auf dem Mailserver als auch im Datenverkehr zwischen Client und Server, welche nur bis zu einem bestimmten Zeitpunkt gebraucht werden. Eine Möglichkeit \hl{Labels} zu löschen oder ein mechanismus, der dafür sorgt, dass ncht mehr verwendete \hl{Labels} Serverseitig gelöscht werden, wäre für diesen Ansatz wünschenswert und notwendig.

\begin{itemize}
	\item max flags ref dovecot buch und dovecot docs

\end{itemize}

\iffalse

Dovecot veraltet individuelle Keywords in der Datei \texttt{dovecot-keywords}; dabei werden die Keywords zur Verwaltung durchnummeriert: 0 \$Junk, 1 \$NonJunk, 2 \$Test, 3 \$Firma,
Gleichzeitig speichert Dovecot die Keywords einer E-Mail im Maildir-Dateinamen - allerdings nicht als Zahl, sondern als korrespondierender, kleingeschriebener (!) Buchstabe, also 0=a, 1=b, 2=c, 3=d usw. Eine Mail mit dem Flag \$Firma hätte also das Flag d gesetzt.
Dovecot kann demnach maximal 26 Flags im Maildir-Namen verwalten (a - z, also 0 bis 25). Werden mehr Keywords gesetzt, werden diese in \texttt{dovecot.index.cache} geschrieben. Dovecot kann also durchaus mehr speichern; andere Programme könnten aus den Maildir-Daten aber nur 26 Flags erkennen - was für die Praxis aber ausreichen sollte. (S. 146)


BUCH \cite{heinleinDovecotPOP3IMAPServer2014}

\fi

\subsection{AT: Header bearbeiten}

\begin{itemize}
	\item evt header näher erklären (oder oben)
\end{itemize}

Der nächste Lösungsansatz, ist das Bearbeiten des E-Mail Headers wie es das roundcube plugin roundcube-snooze umsetzt. Dabei wird der E-Mail, welche \hl{gesnoozt} wird ein neues \hl{Header Feld} \textit{X-Snoozed} hinzugefügt. Im folgenden ist noch einmal das bereits verwendete Beipiel aufgeführt: 

\begin{verbatim}
  X-Snoozed: at Fri, 13 May 2022 10:16:56 +1000;
    until Fri, 13 May 2022 10:17:00 +1000;
    from INBOX;
    woken
\end{verbatim}

Das neue Header Feld enthät sowohl den genau Zeitpunt des \hl{snooze} (at) als auch des \hl{unsnooze} (until) in Form von einem in RFC2822\footnote{RFC2822 - Internet Message Format: \url{https://datatracker.ietf.org/doc/html/rfc2822}} definierten Timestamps. Zusätzlich wird der Name der Mailbox gespeichert, aus dem die E-Mail gesnoozt wurde (from). Das Schlüsselwort \enquote{woken} wird dem Header Feld angehängt, wenn die E-Mail wieder \hl{unsnoozt} wurde. Mit diesem Ansatz und den gespeicherten Informationen lassen sich alle definierten Anforderungen an ein Snooze Feature realisieren.

Da dieser Lösungsansatz die Header einer E-Mail bearbeitet, sind auch noch weitere Einflüsse zu beachten. Es könnte die Frage aufkommen, in wie weit durch das Bearbeiten der Header Verschlüsselung und Signierung durch S/MIME beieinflusst werden können. Diesbezüglich ist bei richitger Implementierung allerdings keine Gefahr zu beführchten. S/MIME kann durch das einschließen bestimmter Header in einen sogenannten \enquote{message/rfc822 wrapper}, auch nicht Inhaltsbezogene Header wie z.B. den \enquote{To} Header schützen. \cite{schaadSecureMultipurposeInternet2019} \cite{resnickInternetMessageFormat2001} Allerdings sind diese explizit auszuwählen. Es gibt äußere Header, welche für S/MIME nicht relevant sind. Wenn der \textit{X-Snoozed} Header als einer dieser äußeren hinzugefügt wird, ergibt sich somit kein Einfluss auf S/MIME.\\
Auch Erweiterungen, wie RFC7508\footnote{RFC7508 - Securing Header Fields with S/MIME \url{https://datatracker.ietf.org/doc/rfc7508/}} basieren auf der Auswahl bestimmter Header, welche geschützt werden und es erlauben, Header hinzuzufügen ohne die Sicherheitsmechanismen \hl{kaputt} zu machen. \cite{cailleuxSecuringHeaderFields2015}

Ein Problem dieses Ansatztes ist, dass die Header einer E-Mail eig. nicht durch den empfangenden Client bearbeitet werden. \hl{Dazu gibts ja IMAP und Erweiterungen, um die Nachricht an sich unberührt zu lassen... Hier irgendwie noch begründen}

\subsection{AT: Metadaten Speichern}

Ein weiterer Lösungsansatz ist die Verwendung der RFCs 5257\footnote{RFC5257 - Internet Message Access Protocol - ANNOTATE Extension \url{https://datatracker.ietf.org/doc/html/rfc5257}} (Internet Message Access Protocol - ANNOTATE Extension) und 5464\footnote{RFC5464 - The IMAP METADATA Extension \url{https://datatracker.ietf.org/doc/html/rfc5464}} (The IMAP METADATA Extension). Beide Erweiterungen funktionieren sehr ähnlich. Die Annotate Extention ermöglicht zu jeder E-Mail seperat Informationen abzuspeichern, die Metadata Extention dagegen zu Mailboxen und auf Server Ebene. Die Annotate Extention ist eine Experimentelle Erweiterung von 2008.\cite{dabooInternetMessageAccess2008} Aufgrund dessen fällt die Implementierung in Mailservern eher gering aus.\cite{boschSpecsUnofficialIMAP} Gerade DoveCot als verbreitetster IMAP Mailserver \hl{BELEG} unterstützt diese Erweiterung nicht. Die Metadata Erweiterung dagegen ist Teil des Standards und wird von DoveCot implementiert.\cite{boschSpecsUnofficialIMAP} Es wird im folgenden der Lösungsansatz anhand der Metadata Erweiterung erklärt, obwohl die Annotate Erweiterung eine bessere Grundlage für das Snooze Feature bietet, da Informationen direkt auf E-Mail Ebene abgespeichert werden können. Für die Metadaten Erweiterung spricht in diesem Fall aber die bereits existierende Standardisierung und somit vorhandene Implementierung in vielen IMAP Mailservern.

Die Metadata Erweiterung führt neue IMAP Befehle ein für das setzen und abrufen der Metadaten. Um auf Informationen auf Mailbox Ebene zuzugreifen ist der Mailboxname als erstes Argument mitzugeben. Um auf die Informationen auf Serverebene zuzugreifen wird ein leerer String als Argument mitgegeben. Der Speicher pro Mailbox bzw. für den Server ist dann Hirarchisch aufgebaut und besteht aus Eintragspaaren bestehend aus Name und Wert. Der Name des Eintrages beginnt mit einem \enquote{/} und wird von Worten gefolgt, wie wiederum mit \enquote{/} getrennt sind. Dieser Aufgabau bildet dann die Hirarchie der Einträge.\\
Die oberste Hirachrchie-Ebene besteht aus zwei Möglichkeiten: \enquote{/private} und \enquote{/shared}. Unter private sind Einträge zu findne, welche nur durch den eigeloggten Nutzenden abgerufen werden können. Unter shared befinden sich Einträge, welche für alle Nutzenden, die Zugriff auf diese Mailbox oder den Server haben abrufbar sind. Die nächste Hirarchiebenede besteht aus vordefinierten Möglichkeiten wie z.B. \enquote{/private/comment} oder \enquote{/shared/comment} für eine Notiz zur Mailbox. An dieser Stelle könnte man ansetzten und eine Eintrag \enquote{/private/snoozed} für eine spezielle Snoozed Mailbox erzeugen. In diese Mailbox werden die \hl{gesnoozten} E-Mails verschoben und als Wert des Eintrages wird ein JSON Objekt gespeichert, welches zu allen in der Mailbox befindlichen E-Mails die notwendigen Snooze Informationen abspeichert.

\begin{itemize}
	\item Evt noch drauf eingehen, dass Wert von Eintrag mehrzeitlig sein kann und string NIL oder binary data sein kann
	\item Evt auf min von 10 Einträge pro Mailbox müssen erlaubt sein, darüer hinaus vom server einschrenkbar, eingehen
\end{itemize}


\subsection{AT: Referenze E-Mail}

Ein weiterer Ansatz ist das Speichern der Snooze Informationen in einer extra E-Mail ähnlich zur Implementierung, die Mailspring verwendet um E-Mails an den Anfang der Inbox zu sortieren. Beim snoozen würde dabei eine neue E-Mail erzeugt werden, welche \hl{per Referenz} der eigentlichen E-Mail angehängt wird. Über ein Attribut dieser neuen E-Mail, welches defineirt ist kann dann die E-Mail im Client ausgeblendet, sodass nur die eigentliche \hl{gesnoozte} E-Mail sichtbar ist. Für dieses Attribut gibt es mehrere Möglichkeiten. Beispielsweise kann eine \hl{Keyword} \enquote{Hidden} eingeführt werden, welches den Clients mitteilt, dass die E-Mail mit diesem \hl{Keyword} unsichtbar sein soll. Es kann auch ein Header in der E-Mail einen bestimmten Wert haben. Beispielsweise könnte man den Subject Header auf \enquote{SNOOZEDMETADATA} setzen. Wichtig ist, dass dieses Attribut einheitlich und eindeutig definiert ist. Im Body der E-Mail könnten dann die Informationen zum Snooze der eigentlichen E-Mail in Form z.B. eines JSNON Objekts stehen.

Für ander Clients, die diesen Ansatz nicht implementieren, ensteht wie auch bei Mailspring eine extra E-Mail, die eigentlich kein relevanten für den Nutzenden hat. Viele E-Mail Clients bieten implemntieren zwar die Thread Funktionalität und würden die extra Emial nur bei Auswahl der eigentlichen E-Mail anzeigen, trotzdem kann dies zu Unübersichtlichkeit und Verwirrung führen.

\subsection{AT: Dedicated Ordner}

Alle bis jetzt beschriebenen Lösungsansätze, mit ausnahme der Benutzung der Metadata Erweiterung, erfüllen die Aufgabe, erkennbar zu machen, welche E-Mail gesnoozt ist, ohne eine extra Mailbox anzulegen. Das heißt aber auch, dass Clients, welche keine Implementierung einer dieser Ansätze verfolgen, zu Verwirrung und Unübersichtlichkeit führen können, wenn mehrere Clients benutzt werden. \cite{SnoozedEmailsStay2022} Es ist deshalb sinnvoll eine extra Mailbox anzulegen, welche \hl{gesnoozte} E-Mails aufbewahrt, bis sie wieder \hl{unsnoozed} werden. Dieses Verhalten gibt es bereits in vielen Clients, welche ein Snooze Feature implementiert haben. Allerdings gibt es in der Namensgebung dieser Mailbox, wie bereits erwähnt, viele Unterschiede. Ein einheitlicher Name wie z.B. \enquote{Snoozed} wäre hier sinnvoll.

Für eine interoperable Lösung kann sich an der Idee der \enquote{Special-Use Mailbox} orientiert werden, welche im  RFC6154\footnote{RFC6154 - IMAP LIST Extension for Special-Use Mailboxes: \url{https://datatracker.ietf.org/doc/rfc6154/}} definert wird und bereits Teil des offiziellen IMAP Standards in der neusten Version (4rev2) ist. Dabei gibt der Server beim Listen der Mailboxen bestimmte Attribute zurück, welche näher beschreiben, was in der Mailbox zu finden ist oder was dort hinein gehört. \cite{melnikovInternetMessageAccess2021} Es gibt definierte fest definierte Attribute, wie z.B. \enquote{\textbackslash{Archive}} oder \enquote{\textbackslash{Drafts}}, welche eine Mailbox für archivierte Nachrichten und eine Mailbox für Entwürfe spezifiziert. An dieser Stelle könnte eine Erweiterung des Standards um ein Attribut \enquote{\textbackslash{Snoozed}} angestrebt werden, welches dann für alle Clients klar definiert, welche Mailbox die Aufgabe hat \hl{gesnoozte} E-Mails aufzubewahren.

\begin{itemize}
	\item Nochmal umformulieren mit Buch Dovecot
	\item durch special use attribute gelöstes Problem wird wieder neu aufgerollt, da kein Snoozed special use existiert
\end{itemize}


\iffalse

Es war jahrelang - wohl eher jahrzehntelang - ein wirklich ärgerliches Dilemma, dass jeder Mailclient seine eigenen Vorstellungen davon hatte, wie der IMAP-Folder für gesendete Nachrichten heißen sollte: Sent, Sent Messages, Gesendete Nachrichten,...? Nachdem Outlook damit begann, diese Ordner auch noch mit übersetzten Namen anzulegen (\enquote{gesendete Objekte}), war das Chaos perfekt, wenn verschiedene Mailclients oder Webmailer gemeinsm in einem IMAP-Account arbeiten sollten und sich jeder Mailclient am Ende des an Folder-Struktur anlegte, was er glaubte an Namen verwenden zu müssen.
Die Krönung war, dass viele Mailclients für diese \enquote{speziellen Ordner} Namen anzeigten, die von den tatsächlichen IMAP-Namen abwichen. So konnte man sich am Ende nue sicher sein, wie der dahinterligende IMAP-Folder tatsächlich hieß.
RFC 6154 definiert darum eine IMAP-Erweiterung, über die sich Mailclients mit dem Server abstimmen, welche IMAP-Namen diese Special-Use Mailboxen haben. So lassen sich zentral einheitliche IMAP-Foldernamen vorgeben, während jeder Client seinem User einen beliebigen, selbst gewählten Namen vorgaukeln kann. (S. 65)


BUCH \cite{heinleinDovecotPOP3IMAPServer2014}

\fi

\subsection{AT: Savedate}

Eine Aufgabe, die für eine Snooze Funktionaliät nicht entschiedend ist, aber zu einem besseren Nutzendenerlebnis breiträgt ist das sortieren an den Anfang nach dem \hl{unsnoozen}. Dafür beitet sich die IMAP Erweiterung RFC8514\footnote{RFC8514 - Internet Message Access Protocol (IMAP) - SAVEDATE Extension: \url{https://datatracker.ietf.org/doc/html/rfc8514/}} (Internet Message Access Protocol (IMAP) - SAVEDATE Extension) an. Diese Erweiterung definiert ein neues E-Mail Attribut \enquote{save date}. Dieser Zeitpunkt ist ist der Zeitpunkt, an dem die E-Mail in die Mailbox gekommen ist, in der sie sich gerade befindet. Sobald eine E-Mail also von einer Inbox in eine andere verschoben wird, ändert sich dieses Attribut auf die Aktuelle Zeit. Abgerufen werden kann dieses Attribut über den \textit{FETCH} Befehl.\\
Wenn man davon ausgeht, dass eine E-Mail beim \hl{snoozen} in eine andere Mailbox verschoben wird und beim \hl{unsnoozen} wieder zurückgeschoben wird, kann man die E-Mails der Mailbox nach diesem Attribut sortieren und würde E-Mails, welche gerade \hl{gewaked} sind am Anfang der Mailbox angezeigt bekommen.\\
Leider ist diese Erweiterung im Moment nur in DoveCot ab der Version 2.3.11 genutzt werden. \cite{boschSpecsUnofficialIMAP}

\subsection{AT: Wer übernimmt das verschieben}

Alle beschriebenen Lösungsansätze bieten teilweise oder vollumfänglich die Grundlage für eine Snooze Funktionalität. Allerdings ist der eigentliche Prozess des \hl{snoozen} und \hl{unsnoozen} noch nicht geregelt. Dies kann entweder durch den Server oder durch den Client passieren. Für den Fall, dass eine Clientseitige Implementierung angestrebt wird, ist es notwendig, dass alle Clients schnelle Updates über eine Veränderung auf dem Server bekommen, da das \hl{unsnoozen} theoretisch von vielen Clients gleichzeitig ausgeführt werden kann.\\
Hierführ bietet sich der RFC7162\footnote{RFC7162 -IMAP Extensions: Quick Flag Changes Resynchronization (CONDSTORE) and Quick Mailbox Resynchronization (QRESYNC): \url{hhttps://datatracker.ietf.org/doc/html/rfc7162}} an. Diese Erweiterung ist Teil des Standards und weit verbreitet implementiert.\cite{boschSpecsUnofficialIMAP} Die \enquote{Conditional Store} Funktionalität ermöglicht es mehrere Änderungen innerhalb einer Mailbox zu koordinieren und sicherzustellen, dass immer nur ein Client schreibzugriff hat. Zusätzlich wird ein Mechanismus definiert, welcher es ermöglicht Mailbox Änderungen in Bezug auf Flag und Metadaten schnell zu synconisieren.\cite{melnikovIMAPExtensionsQuick2014}

\section{Fazit}
\label{sec:LoesungFazit}

\begin{itemize}
	\item noch einmal die erarbeiteten Kriterien (Serverseitig, einfach implementierbar, Implementiert, ... etc.) zusammentragen und ggf. wichten
\end{itemize}


\begin{itemize}
	\item (JMAP (nicht IMAP aber, sollte erwähnt werden), vlt aber eher bei sparkmail.)
\end{itemize}

\section{AT: Nextcloud Mail App}
\label{sec:LoesungNextcloud}

\begin{itemize}
	\item Welcher Lösungsansatz passt am besten in die App
	\item horde (was kann, was nicht)
	\item 
\end{itemize}


\chapter{AT: Vorschlag Standarderweiterung}
\label{sec:VorschlagStandard}

\begin{itemize}
	\item Was ist RFC?
	\item Wie könnte ein RFC für eine Snooze aussehen
	\begin{itemize}
		\item Flags erweitern um Snoozed
		\item Special use mailboxes erweitern um Snoozed oder zumindest einheitlicher Name
	\end{itemize}
\end{itemize}
